<odoo>
    <!-- Menu Quotation -->
    <menuitem name="Quotation"
        id="menu_quotation_root"
        sequence="2"/>
    <menuitem id="menu_quotation_main" parent="menu_quotation_root" name="Quotation" sequence="1"/>
    <!-- PENDING ORDER -->
    <record id="view_order_econtract_form" model="ir.ui.view">
        <field name="name">Order form</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <form string="order">
                <sheet>
                    <header>
                        <button string="Submit Quotation" type="object"  confirm="Are you sure you want to continue?" name="pending_quotation" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>
                        <field name="state" widget="statusbar" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>
                        <button string="Submit Quotation" type="object"  confirm="Are you sure you want to continue?" name="pending_usage" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'usage')]}"/>
                        <field name="state_usage" widget="statusbar" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'usage')]}"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="xquotationtrans_number_quotation"/>
                            </h1>
                        </div> 
                        <group>
                            <!-- <select class="form-control" name="xquotationtrans_usage_order">
                                <option t-attf-value="'order'">Order</option>
                                <option t-attf-value="'usage'" invisible="1">Usage</option>
                            </select> -->
                            <field name="xquotationtrans_usage_quotation"/>
                            <field name="xquotationtrans_sales_contract_id" invisible="1"/>
                            <field name="xquotationtrans_sales_name" invisible="1"/>
                            <field name="xquotationtrans_sales_phone" invisible="1"/>
                            <field name="xquotationtrans_sales_email" invisible="1"/>
                            <field name="xquotationtrans_sales_department" invisible="1"/>
                            <field name="xquotationtrans_name_vp" invisible="1"/>
                            <field name="xquotationtrans_name_gm" invisible="1"/>
                            <field name="xquotationtrans_email_vp" invisible="1"/>
                            <field name="xquotationtrans_email_gm" invisible="1"/>
                            <field name="xquotationtrans_vp_department" invisible="1"/>
                            <field name="xquotationtrans_gm_department" invisible="1"/>
                            <field name="xquotationtrans_sales_position" invisible="1"/>
                            <field name="xquotationtrans_vp_position" invisible="1"/>
                            <field name="xquotationtrans_gm_position" invisible="1"/>
                            <field name="xquotationtrans_number_contract_id" on_change="onchange_xquotationtrans_number_contract_id(xquotationtrans_number_contract_id)"
                                        domain="[('xtransaction_sales_id', '=', xquotationtrans_sales_contract_id)]"
                                        context="{'show_service': 1}"
                                        options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                        </group>
                    <group>
                        <group string="Client">
                            <field name="xquotationtrans_company_npwp"/>
                            <field name="xquotationtrans_company_contract_id"/>
                            <field name="xquotationtrans_company_alamat" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_contract_id"/>
                            <field name="xquotationtrans_client_delegation_jabatan" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_email" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_phone" invisible="1"/>
                            <field name="xquotationtrans_company_product"/>
                            <field name="xquotationtrans_company_brand_category"/>
                            <field name="xquotationtrans_company_name"/>
                            <field name="xquotationtrans_date"/>
                            <field name="xquotationtrans_merchdelegation_name"/>
                            <field name="xquotationtrans_merchdelegation_email"/>
                            <field name="xquotationtrans_merchdelegation_phone"/>
                            <field name="xquotationtrans_invoices_address"/>
                        </group>
                        <group string="Telkomsel">
                            <field name="xquotationtrans_pic_telkomsel"/>
                            <field name="xquotationtrans_pic_telkomsel_phone"/>
                        </group>
                    </group>
                    <group>
                        <!-- ORDER -->
                        <field name="xquotationtrans_list_rate_card_ids" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                               
                                <field name="xquotationtrans_end_date"/>                               
                                <field name="xquotationtrans_qty"/>                               
                                <field name="xquotationtrans_detailinventory_rate"/>
                                <!-- <field name="xquotationtrans_harga_sales"/>     -->              
                                <field name="xquotationtrans_total"/>                               
                            </tree>
                        </field>
                        <field name="xquotationtrans_total_harga" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>
                        <field name="xquotationtrans_discount" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>                           
                        <field name="xquotationtrans_total_hargax" on_change="update_agesm_onchange" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>   
                        <!-- <field name="hargappn"/> -->     
                        <field name="xquotationtrans_discount_ppnx" on_change="xxxx" invisible='1' attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>        
                        <field name="xquotationtrans_total_bayar_fix" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>  
                        <!-- USAGE -->
                        <field name="xquotationtrans_list_rate_card_ids_usage" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'usage')]}">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                               
                                <field name="xquotationtrans_end_date"/>                               
                                <field name="xquotationtrans_qty"/>                               
                                <field name="xquotationtrans_detailinventory_rate"/>
                            </tree>
                        </field>
                        <field name="xquotationtrans_discount_usage" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'usage')]}"/>                           
                    </group>
                    <notebook>
                        <page name="alamatelkomsel" string="Info Telkomsel" invisible="1">
                            <group>
                                <field name="xquotationtrans_alamat_name" invisible="1"/>
                                <field name="xquotationtrans_alamat" invisible="1"/>
                                <field name="xquotationtrans_lantai" invisible="1"/>
                                <field name="xquotationtrans_no_telp" invisible="1"/>
                                <field name="xquotationtrans_facsimile" invisible="1"/>
                                <field name="xquotationtrans_attention" invisible="1"/>
                            </group>
                        </page>  
                        <page name="banktsel" string="Bank Info" invisible="1">
                            <group>
                                <field name="xquotationtrans_account_bank_name" invisible="1"/>
                                <field name="xquotationtrans_bank_name" invisible="1"/> 
                                <field name="xquotationtrans_alamat_bank" invisible="1"/>
                                <field name="xquotationtrans_norek" invisible="1"/>
                            </group>
                        </page>                                                  
                    </notebook>
                    </sheet> 
                </sheet>                 
            </form>
        </field>
    </record>

    <record id="view_order_econtract_tree" model="ir.ui.view">
        <field name="name">Order tree</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <tree string="order">
                <field name="xquotationtrans_usage_quotation"/> 
                <field name="xquotationtrans_number_quotation"/>  
                <field name="xquotationtrans_number_contract_id"/>  
                <field name="xquotationtrans_sales_contract_id"/>  
                <field name="xquotationtrans_company_contract_id"/>  
                <field name="xquotationtrans_client_delegation_contract_id"/>  
                <field name="xquotationtrans_total_harga"/> 
                <field name="xquotationtrans_discount"/> 
                <field name="xquotationtrans_total_bayar_fix"/> 
                <field name="state"/> 
            </tree>
        </field>
    </record>

    <record id="view_order_econtract_filter" model="ir.ui.view">
        <field name="name">Order</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <search string="order">
                <filter string="Pending" name="order_quotation" domain="[('state','=','pending')]"/>
                <filter string="Rejected" name="order_quotation" domain="[('state','=','rejected')]"/>
            </search>
        </field>
    </record>


    <record id="open_module_tree_order_transaction_telkomsel" model="ir.actions.act_window">
        <field name="name">Order</field>
        <field name="res_model">quotation.transaction.telkomsel</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
            <field name="context">{
                "search_default_order_quotation": 2,
                "default_order_quotation": 2}
            </field>
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_order_econtract_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_order_econtract_form')})]"/>
            <field name="search_view_id" ref="view_order_econtract_filter"/>
            <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create a new order.
            </p>
        </field>
    </record>

    <menuitem action="open_module_tree_order_transaction_telkomsel"
        id="module_open_module_tree_order_transaction_telkomsel" parent="menu_quotation_main" sequence="2" groups="contract_e.group_admin,contract_e.group_sales"/>

    <!-- PENDING USAGE -->
    <record id="view_usage_econtract_form" model="ir.ui.view">
        <field name="name">Usage form</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <form string="Usage">
                <sheet>
                    <header>
                        <button string="Submit Quotation" type="object"  confirm="Are you sure you want to continue?" name="pending_quotation" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>
                        <field name="state" widget="statusbar" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>
                        <button string="Submit Quotation" type="object"  confirm="Are you sure you want to continue?" name="pending_usage" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'usage')]}"/>
                        <field name="state_usage" widget="statusbar" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'usage')]}"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="xquotationtrans_number_quotation"/>
                            </h1>
                        </div> 
                        <group>
                            <field name="xquotationtrans_usage_quotation"/>
                            <field name="xquotationtrans_sales_contract_id" invisible="1"/>
                            <field name="xquotationtrans_sales_name" invisible="1"/>
                            <field name="xquotationtrans_sales_phone" invisible="1"/>
                            <field name="xquotationtrans_sales_email" invisible="1"/>
                            <field name="xquotationtrans_sales_department" invisible="1"/>
                            <field name="xquotationtrans_name_vp" invisible="1"/>
                            <field name="xquotationtrans_name_gm" invisible="1"/>
                            <field name="xquotationtrans_email_vp" invisible="1"/>
                            <field name="xquotationtrans_email_gm" invisible="1"/>
                            <field name="xquotationtrans_vp_department" invisible="1"/>
                            <field name="xquotationtrans_gm_department" invisible="1"/>
                            <field name="xquotationtrans_sales_position" invisible="1"/>
                            <field name="xquotationtrans_vp_position" invisible="1"/>
                            <field name="xquotationtrans_gm_position" invisible="1"/>
                            <field name="xquotationtrans_number_contract_id" on_change="onchange_xquotationtrans_number_contract_id(xquotationtrans_number_contract_id)"
                                        domain="[('xtransaction_sales_id', '=', xquotationtrans_sales_contract_id)]"
                                        context="{'show_service': 1}"
                                        options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                        </group>
                    <group>
                        <group string="Client">
                            <field name="xquotationtrans_company_npwp"/>
                            <field name="xquotationtrans_company_contract_id"/>
                            <field name="xquotationtrans_company_alamat" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_contract_id"/>
                            <field name="xquotationtrans_client_delegation_jabatan" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_email" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_phone" invisible="1"/>
                            <field name="xquotationtrans_company_product"/>
                            <field name="xquotationtrans_company_brand_category"/>
                            <field name="xquotationtrans_company_name"/>
                            <field name="xquotationtrans_date"/>
                            <field name="xquotationtrans_merchdelegation_name"/>
                            <field name="xquotationtrans_merchdelegation_email"/>
                            <field name="xquotationtrans_merchdelegation_phone"/>
                            <field name="xquotationtrans_invoices_address"/>
                        </group>
                        <group string="Telkomsel">
                            <field name="xquotationtrans_pic_telkomsel"/>
                            <field name="xquotationtrans_pic_telkomsel_phone"/>
                        </group>
                    </group>
                    <group>
                        <!-- ORDER -->
                        <field name="xquotationtrans_list_rate_card_ids" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                               
                                <field name="xquotationtrans_end_date"/>                               
                                <field name="xquotationtrans_qty"/>                               
                                <field name="xquotationtrans_detailinventory_rate"/>
                                <!-- <field name="xquotationtrans_harga_sales"/>     -->              
                                <field name="xquotationtrans_total"/>                               
                            </tree>
                        </field>
                        <field name="xquotationtrans_total_harga" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>
                        <field name="xquotationtrans_discount" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>                           
                        <field name="xquotationtrans_total_hargax" on_change="update_agesm_onchange" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>   
                        <!-- <field name="hargappn"/> -->     
                        <field name="xquotationtrans_discount_ppnx" on_change="xxxx" invisible='1' attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>        
                        <field name="xquotationtrans_total_bayar_fix" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>  
                        <!-- USAGE -->
                        <field name="xquotationtrans_list_rate_card_ids_usage" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'usage')]}">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                               
                                <field name="xquotationtrans_end_date"/>                               
                                <field name="xquotationtrans_qty"/>                               
                                <field name="xquotationtrans_detailinventory_rate"/>
                            </tree>
                        </field>
                        <field name="xquotationtrans_discount_usage" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'usage')]}"/>                           
                    </group>
                    <notebook>
                        <page name="alamatelkomsel" string="Info Telkomsel" invisible="1">
                            <group>
                                <field name="xquotationtrans_alamat_name" invisible="1"/>
                                <field name="xquotationtrans_alamat" invisible="1"/>
                                <field name="xquotationtrans_lantai" invisible="1"/>
                                <field name="xquotationtrans_no_telp" invisible="1"/>
                                <field name="xquotationtrans_facsimile" invisible="1"/>
                                <field name="xquotationtrans_attention" invisible="1"/>
                            </group>
                        </page>  
                        <page name="banktsel" string="Bank Info" invisible="1">
                            <group>
                                <field name="xquotationtrans_account_bank_name" invisible="1"/>
                                <field name="xquotationtrans_bank_name" invisible="1"/> 
                                <field name="xquotationtrans_alamat_bank" invisible="1"/>
                                <field name="xquotationtrans_norek" invisible="1"/>
                            </group>
                        </page>                                                  
                    </notebook>
                    </sheet> 
                </sheet>                 
            </form>
        </field>
    </record>

    <record id="view_usage_econtract_tree" model="ir.ui.view">
        <field name="name">Usage tree</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <tree string="Usage">
                <field name="xquotationtrans_usage_quotation"/> 
                <field name="xquotationtrans_number_quotation"/>  
                <field name="xquotationtrans_number_contract_id"/>  
                <field name="xquotationtrans_sales_contract_id"/>  
                <field name="xquotationtrans_company_contract_id"/>  
                <field name="xquotationtrans_client_delegation_contract_id"/>  
                <field name="xquotationtrans_discount_usage"/> 
                <field name="state_usage"/> 
            </tree>
        </field>
    </record>

    <record id="view_usage_econtract_filter" model="ir.ui.view">
        <field name="name">Usage</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <search string="Usage">
                <filter string="Pending" name="usage_quotation" domain="[('state_usage','=','pending')]"/>
                <filter string="Rejected" name="usage_quotation" domain="[('state_usage','=','rejected')]"/>
            </search>
        </field>
    </record>


    <record id="open_module_tree_usage_transaction_telkomsel" model="ir.actions.act_window">
        <field name="name">Usage</field>
        <field name="res_model">quotation.transaction.telkomsel</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
            <field name="context">{
                "search_default_usage_quotation": 1,
                "default_usage_quotation": 1}
            </field>
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_usage_econtract_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_usage_econtract_form')})]"/>
            <field name="search_view_id" ref="view_usage_econtract_filter"/>
            <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create a new Usage.
            </p>
        </field>
    </record>

    <menuitem action="open_module_tree_usage_transaction_telkomsel"
        id="module_open_module_tree_usage_transaction_telkomsel" parent="menu_quotation_main" sequence="3" groups="contract_e.group_admin,contract_e.group_sales"/>
    <!-- PENDING GM -->
    <menuitem id="menu_pending_quotation_main_gm" parent="menu_quotation_root" name="Pending Quotation GM" sequence="2"/>
    <!-- Quotation -->
    <!-- ORDER -->
    <record id="view_quotation_pending_gm_form" model="ir.ui.view">
        <field name="name">Order Pending form</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <form string="Order Pending" create="false" edit="true">
                <sheet>
                    <header>
                        <button string="Request Approved" type="object"  confirm="Are you sure you want to continue?" name="approved_quotation" attrs="{'invisible': [('state', '=', 'approved')]}" context="{'search_default_state': 'pending'}" class="oe_highlight"/>                        
                        <button string="Rejected" type="object"  confirm="Are you sure you want to continue?" name="rejected_quotation" attrs="{'invisible': [('state','=','rejected')]}" style="background:Red;" />
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="xquotationtrans_number_quotation" readonly="1"/>
                            </h1>
                        </div>  
                        <group>
                            <field name="xquotationtrans_usage_quotation"/>
                            <field name="xquotationtrans_number_contract_id" on_change="onchange_xquotationtrans_number_contract_id(xquotationtrans_number_contract_id)" 
                                                context="{'show_service': 1}"
                                                options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>     
                            <field name="xquotationtrans_sales_contract_id"/>
                            <field name="xquotationtrans_sales_phone" invisible="1"/>
                            <field name="xquotationtrans_sales_email" invisible="1"/>
                            <field name="xquotationtrans_name_gm" invisible="1"/>
                            <field name="xquotationtrans_email_gm" invisible="1"/>
                        </group>
                    <group>
                        <group string="Client">
                            <field name="xquotationtrans_company_npwp"/>
                            <field name="xquotationtrans_company_contract_id"/>
                            <field name="xquotationtrans_company_alamat" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_contract_id"/>
                            <field name="xquotationtrans_client_delegation_jabatan" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_email" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_phone" invisible="1"/>
                            <field name="xquotationtrans_company_product"/>
                            <field name="xquotationtrans_company_brand_category"/>
                            <field name="xquotationtrans_company_name"/>
                            <field name="xquotationtrans_date"/>
                            <field name="xquotationtrans_merchdelegation_name"/>
                            <field name="xquotationtrans_merchdelegation_email"/>
                            <field name="xquotationtrans_merchdelegation_phone"/>
                            <field name="xquotationtrans_invoices_address"/>
                        </group>
                        <group string="Telkomsel">
                            <field name="xquotationtrans_pic_telkomsel"/>
                            <field name="xquotationtrans_pic_telkomsel_phone"/>
                        </group>
                    </group>
                    <group>
                        <field name="xquotationtrans_list_rate_card_ids">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                                
                                <field name="xquotationtrans_end_date"/>                                
                                <field name="xquotationtrans_qty"/>                                
                                <field name="xquotationtrans_detailinventory_rate"/>
                                <!-- <field name="xquotationtrans_harga_sales"/>     -->               
                                <field name="xquotationtrans_total"/>                                
                            </tree>
                        </field>
                        <field name="xquotationtrans_total_harga"/> 
                        <field name="xquotationtrans_discount"/>                            
                        <field name="xquotationtrans_total_hargax" on_change="update_agesm_onchange"/>    
                        <field name="hargappn"/>      
                        <field name="xquotationtrans_discount_ppnx" on_change="xxxx" invisible="1"/>           
                        <field name="xquotationtrans_total_bayar_fix"/>           
                    </group>
                    <notebook>   
                        <page name="reject" string="Comment Rejected">
                            <field name="xquotationtrans_reject"/>
                        </page>                                                                          
                    </notebook>
                    </sheet>  
                </sheet>    
            </form>
        </field>
    </record>

    <record id="view_quotation_pending_gm_tree" model="ir.ui.view">
        <field name="name">Order Pending tree</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <tree string="Order Pending" create="false" edit="false">
                <field name="xquotationtrans_usage_quotation"/> 
                <field name="xquotationtrans_number_quotation"/>  
                <field name="xquotationtrans_number_contract_id"/>  
                <field name="xquotationtrans_sales_contract_id"/>  
                <field name="xquotationtrans_company_contract_id"/>  
                <field name="xquotationtrans_client_delegation_contract_id"/>  
                <field name="xquotationtrans_total_harga"/> 
                <field name="xquotationtrans_discount"/> 
                <field name="xquotationtrans_total_bayar_fix"/> 
                <field name="state"/>  
            </tree>
        </field>
    </record>

    <record id="view_quotation_pending_gm_filter" model="ir.ui.view">
        <field name="name">Order Pending</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <search string="Order Pending">
                <filter string="Pending GM" name="pending_quotation" domain="[('xquotationtrans_discount','&lt;=','30'),('xquotationtrans_usage_quotation','=','order')]"/>
                <filter string="Pending GM Order" name="pending_usage" domain="[('state','=','pending')]"/>
                <filter string="Rejected GM Order" name="pending_usage" domain="[('state','=','rejected')]"/>
            </search>
        </field>
    </record>

    <record id="open_module_tree_quotation_transaction_telkomsel_gm" model="ir.actions.act_window">
        <field name="name">Order Pending</field>
        <field name="res_model">quotation.transaction.telkomsel</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
            <field name="context">{
                "search_default_pending_quotation": 30,
                "default_pending_quotation": 30}
            </field>
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_quotation_pending_gm_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_quotation_pending_gm_form')})]"/>
            <field name="search_view_id" ref="view_quotation_pending_gm_filter"/>
            <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create Aprroved.
            </p>
        </field>
    </record>
    <menuitem action="open_module_tree_quotation_transaction_telkomsel_gm"
        id="menu_open_module_tree_quotation_transaction_telkomsel_gm" parent="menu_pending_quotation_main_gm" sequence="2" groups="contract_e.group_admin,contract_e.group_gm"/>
    <!-- Usage -->
    <record id="view_usage_pending_gm_form" model="ir.ui.view">
        <field name="name">Usage Pending form</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <form string="Usage Pending" create="false" edit="true">
                <sheet>
                    <header>
                        <button string="Request Approved" type="object"  confirm="Are you sure you want to continue?" name="approved_usage" attrs="{'invisible': [('state_usage', '=', 'approved')]}" context="{'search_default_state': 'pending'}" class="oe_highlight"/>                        
                        <button string="Rejected" type="object"  confirm="Are you sure you want to continue?" name="rejected_usage" attrs="{'invisible': [('state_usage','=','rejected')]}" style="background:Red;" />
                        <field name="state_usage" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="xquotationtrans_number_quotation" readonly="1"/>
                            </h1>
                        </div>  
                        <group>
                            <field name="xquotationtrans_usage_quotation"/>
                            <field name="xquotationtrans_number_contract_id" on_change="onchange_xquotationtrans_number_contract_id(xquotationtrans_number_contract_id)" 
                                                context="{'show_service': 1}"
                                                options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>     
                            <field name="xquotationtrans_sales_contract_id"/>
                            <field name="xquotationtrans_sales_phone" invisible="1"/>
                            <field name="xquotationtrans_sales_email" invisible="1"/>
                            <field name="xquotationtrans_name_gm" invisible="1"/>
                            <field name="xquotationtrans_email_gm" invisible="1"/>
                        </group>
                    <group>
                        <group string="Client">
                            <field name="xquotationtrans_company_npwp"/>
                            <field name="xquotationtrans_company_contract_id"/>
                            <field name="xquotationtrans_company_alamat" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_contract_id"/>
                            <field name="xquotationtrans_client_delegation_jabatan" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_email" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_phone" invisible="1"/>
                            <field name="xquotationtrans_company_product"/>
                            <field name="xquotationtrans_company_brand_category"/>
                            <field name="xquotationtrans_company_name"/>
                            <field name="xquotationtrans_date"/>
                            <field name="xquotationtrans_merchdelegation_name"/>
                            <field name="xquotationtrans_merchdelegation_email"/>
                            <field name="xquotationtrans_merchdelegation_phone"/>
                            <field name="xquotationtrans_invoices_address"/>
                        </group>
                        <group string="Telkomsel">
                            <field name="xquotationtrans_pic_telkomsel"/>
                            <field name="xquotationtrans_pic_telkomsel_phone"/>
                        </group>
                    </group>
                    <group>
                        <field name="xquotationtrans_list_rate_card_ids_usage">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                                
                                <field name="xquotationtrans_end_date"/>                                
                                <field name="xquotationtrans_qty"/>                                
                                <field name="xquotationtrans_detailinventory_rate"/>                     
                            </tree>
                        </field>
                        <field name="xquotationtrans_discount_usage"/>                            
                    </group>
                    <notebook>
                        <page name="reject" string="Comment Rejected">
                            <field name="xquotationtrans_reject"/>
                        </page>                                                                          
                    </notebook>
                    </sheet>  
                </sheet>    
            </form>
        </field>
    </record>

    <record id="view_usage_pending_gm_tree" model="ir.ui.view">
        <field name="name">Usage Pending tree</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <tree string="Usage Pending" create="false" edit="false">
                <field name="xquotationtrans_usage_quotation"/> 
                <field name="xquotationtrans_number_quotation"/>  
                <field name="xquotationtrans_number_contract_id"/>  
                <field name="xquotationtrans_sales_contract_id"/>  
                <field name="xquotationtrans_company_contract_id"/>  
                <field name="xquotationtrans_client_delegation_contract_id"/>  
                <field name="xquotationtrans_discount_usage"/> 
                <field name="state_usage"/>   
            </tree>
        </field>
    </record>

    <record id="view_usage_pending_gm_filter" model="ir.ui.view">
        <field name="name">Usage Pending</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <search string="Usage Pending">
                <filter string="Pending GM" name="pending_usage" domain="[('xquotationtrans_discount_usage','&lt;=','30'),('xquotationtrans_usage_quotation','=','usage')]"/>
                <filter string="Pending GM Usage" name="pending_usage" domain="[('state_usage','=','pending')]"/>
                <filter string="Rejected GM Usage" name="pending_usage" domain="[('state_usage','=','rejected')]"/>
            </search>
        </field>
    </record>

    <record id="open_module_tree_usage_transaction_telkomsel_gm" model="ir.actions.act_window">
        <field name="name">Usage Pending</field>
        <field name="res_model">quotation.transaction.telkomsel</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
            <field name="context">{
                "search_default_pending_usage": 30,
                "default_pending_usage": 30}
            </field>
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_usage_pending_gm_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_usage_pending_gm_form')})]"/>
            <field name="search_view_id" ref="view_usage_pending_gm_filter"/>
            <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create Aprroved.
            </p>
        </field>
    </record>
    <menuitem action="open_module_tree_usage_transaction_telkomsel_gm"
        id="menu_open_module_tree_usage_transaction_telkomsel_gm" parent="menu_pending_quotation_main_gm" sequence="3" groups="contract_e.group_admin,contract_e.group_gm"/>

    <!-- PENDING VP -->
    <menuitem id="menu_pending_quotation_main_vp" parent="menu_quotation_root" name="Pending Quotation VP" sequence="3"/>
    <!-- Quotation -->
    <!-- ORDER -->
    <record id="view_quotation_pending_vp_form" model="ir.ui.view">
        <field name="name">Order Pending form</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <form string="Order Pending" create="false" edit="true">
                <sheet>
                    <header>
                        <button string="Request Approved" type="object"  confirm="Are you sure you want to continue?" name="approved_quotation" attrs="{'invisible': [('state', '=', 'approved')]}" context="{'search_default_state': 'pending'}" class="oe_highlight"/>                        
                        <button string="Rejected" type="object"  confirm="Are you sure you want to continue?" name="rejected_quotation" attrs="{'invisible': [('state','=','rejected')]}" style="background:Red;" />
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="xquotationtrans_number_quotation" readonly="1"/>
                            </h1>
                        </div>  
                        <group>
                            <field name="xquotationtrans_usage_quotation"/>
                            <field name="xquotationtrans_number_contract_id" on_change="onchange_xquotationtrans_number_contract_id(xquotationtrans_number_contract_id)" 
                                                context="{'show_service': 1}"
                                                options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>     
                            <field name="xquotationtrans_sales_contract_id"/>
                            <field name="xquotationtrans_sales_phone" invisible="1"/>
                            <field name="xquotationtrans_sales_email" invisible="1"/>
                            <field name="xquotationtrans_name_gm" invisible="1"/>
                            <field name="xquotationtrans_email_gm" invisible="1"/>
                        </group>
                    <group>
                        <group string="Client">
                            <field name="xquotationtrans_company_npwp"/>
                            <field name="xquotationtrans_company_contract_id"/>
                            <field name="xquotationtrans_company_alamat" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_contract_id"/>
                            <field name="xquotationtrans_client_delegation_jabatan" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_email" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_phone" invisible="1"/>
                            <field name="xquotationtrans_company_product"/>
                            <field name="xquotationtrans_company_brand_category"/>
                            <field name="xquotationtrans_company_name"/>
                            <field name="xquotationtrans_date"/>
                            <field name="xquotationtrans_merchdelegation_name"/>
                            <field name="xquotationtrans_merchdelegation_email"/>
                            <field name="xquotationtrans_merchdelegation_phone"/>
                            <field name="xquotationtrans_invoices_address"/>
                        </group>
                        <group string="Telkomsel">
                            <field name="xquotationtrans_pic_telkomsel"/>
                            <field name="xquotationtrans_pic_telkomsel_phone"/>
                        </group>
                    </group>
                    <group>
                        <field name="xquotationtrans_list_rate_card_ids">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                                
                                <field name="xquotationtrans_end_date"/>                                
                                <field name="xquotationtrans_qty"/>                                
                                <field name="xquotationtrans_detailinventory_rate"/>
                                <!-- <field name="xquotationtrans_harga_sales"/>     -->               
                                <field name="xquotationtrans_total"/>                                
                            </tree>
                        </field>
                        <field name="xquotationtrans_total_harga"/> 
                        <field name="xquotationtrans_discount"/>                            
                        <field name="xquotationtrans_total_hargax" on_change="update_agesm_onchange"/>    
                        <field name="hargappn"/>      
                        <field name="xquotationtrans_discount_ppnx" on_change="xxxx" invisible="1"/>           
                        <field name="xquotationtrans_total_bayar_fix"/>           
                    </group>
                    <notebook>   
                        <page name="reject" string="Comment Rejected">
                            <field name="xquotationtrans_reject"/>
                        </page>                                                                          
                    </notebook>
                    </sheet>  
                </sheet>    
            </form>
        </field>
    </record>

    <record id="view_quotation_pending_vp_tree" model="ir.ui.view">
        <field name="name">Order Pending tree</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <tree string="Order Pending" create="false" edit="false">
                <field name="xquotationtrans_usage_quotation"/> 
                <field name="xquotationtrans_number_quotation"/>  
                <field name="xquotationtrans_number_contract_id"/>  
                <field name="xquotationtrans_sales_contract_id"/>  
                <field name="xquotationtrans_company_contract_id"/>  
                <field name="xquotationtrans_client_delegation_contract_id"/>  
                <field name="xquotationtrans_total_harga"/> 
                <field name="xquotationtrans_discount"/> 
                <field name="xquotationtrans_total_bayar_fix"/> 
                <field name="state"/>  
            </tree>
        </field>
    </record>

    <record id="view_quotation_pending_vp_filter" model="ir.ui.view">
        <field name="name">Order Pending</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <search string="Order Pending">
                <filter string="VP Order" name="pending_quotation" domain="[('xquotationtrans_discount','&gt;','30'),('xquotationtrans_usage_quotation','=','order')]"/>
                <filter string="Pending VP Order" name="pending_usage" domain="[('state_usage','=','pending')]"/>
                <filter string="Rejected VP Order" name="pending_usage" domain="[('state_usage','=','rejected')]"/>
            </search>
        </field>
    </record>

    <record id="open_module_tree_quotation_transaction_telkomsel_vp" model="ir.actions.act_window">
        <field name="name">Order Pending</field>
        <field name="res_model">quotation.transaction.telkomsel</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
            <field name="context">{
                "search_default_pending_quotation": 30,
                "default_pending_quotation": 30}
            </field>
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_quotation_pending_vp_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_quotation_pending_vp_form')})]"/>
            <field name="search_view_id" ref="view_quotation_pending_vp_filter"/>
            <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create Aprroved.
            </p>
        </field>
    </record>
    <menuitem action="open_module_tree_quotation_transaction_telkomsel_vp"
        id="menu_open_module_tree_quotation_transaction_telkomsel_vp" parent="menu_pending_quotation_main_vp" sequence="2" groups="contract_e.group_admin,contract_e.group_vp"/>
    <!-- Usage -->
    <record id="view_usage_pending_vp_form" model="ir.ui.view">
        <field name="name">Usage Pending form</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <form string="Usage Pending" create="false" edit="true">
                <sheet>
                    <header>
                        <button string="Request Approved" type="object"  confirm="Are you sure you want to continue?" name="approved_usage" attrs="{'invisible': [('state_usage', '=', 'approved')]}" context="{'search_default_state': 'pending'}" class="oe_highlight"/>                        
                        <button string="Rejected" type="object"  confirm="Are you sure you want to continue?" name="rejected_usage" attrs="{'invisible': [('state_usage','=','rejected')]}" style="background:Red;" />
                        <field name="state_usage" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="xquotationtrans_number_quotation" readonly="1"/>
                            </h1>
                        </div>  
                        <group>
                            <field name="xquotationtrans_usage_quotation"/>
                            <field name="xquotationtrans_number_contract_id" on_change="onchange_xquotationtrans_number_contract_id(xquotationtrans_number_contract_id)" 
                                                context="{'show_service': 1}"
                                                options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>     
                            <field name="xquotationtrans_sales_contract_id"/>
                            <field name="xquotationtrans_sales_phone" invisible="1"/>
                            <field name="xquotationtrans_sales_email" invisible="1"/>
                            <field name="xquotationtrans_name_gm" invisible="1"/>
                            <field name="xquotationtrans_email_gm" invisible="1"/>
                        </group>
                    <group>
                        <group string="Client">
                            <field name="xquotationtrans_company_npwp"/>
                            <field name="xquotationtrans_company_contract_id"/>
                            <field name="xquotationtrans_company_alamat" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_contract_id"/>
                            <field name="xquotationtrans_client_delegation_jabatan" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_email" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_phone" invisible="1"/>
                            <field name="xquotationtrans_company_product"/>
                            <field name="xquotationtrans_company_brand_category"/>
                            <field name="xquotationtrans_company_name"/>
                            <field name="xquotationtrans_date"/>
                            <field name="xquotationtrans_merchdelegation_name"/>
                            <field name="xquotationtrans_merchdelegation_email"/>
                            <field name="xquotationtrans_merchdelegation_phone"/>
                            <field name="xquotationtrans_invoices_address"/>
                        </group>
                        <group string="Telkomsel">
                            <field name="xquotationtrans_pic_telkomsel"/>
                            <field name="xquotationtrans_pic_telkomsel_phone"/>
                        </group>
                    </group>
                    <group>
                        <field name="xquotationtrans_list_rate_card_ids_usage">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                                
                                <field name="xquotationtrans_end_date"/>                                
                                <field name="xquotationtrans_qty"/>                                
                                <field name="xquotationtrans_detailinventory_rate"/>                     
                            </tree>
                        </field>
                        <field name="xquotationtrans_discount_usage"/>                            
                    </group>
                    <notebook>
                        <page name="reject" string="Comment Rejected">
                            <field name="xquotationtrans_reject"/>
                        </page>                                                                          
                    </notebook>
                    </sheet>  
                </sheet>    
            </form>
        </field>
    </record>

    <record id="view_usage_pending_vp_tree" model="ir.ui.view">
        <field name="name">Usage Pending tree</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <tree string="Usage Pending" create="false" edit="false">
                <field name="xquotationtrans_usage_quotation"/> 
                <field name="xquotationtrans_number_quotation"/>  
                <field name="xquotationtrans_number_contract_id"/>  
                <field name="xquotationtrans_sales_contract_id"/>  
                <field name="xquotationtrans_company_contract_id"/>  
                <field name="xquotationtrans_client_delegation_contract_id"/>  
                <field name="xquotationtrans_discount_usage"/> 
                <field name="state_usage"/>   
            </tree>
        </field>
    </record>

    <record id="view_usage_pending_vp_filter" model="ir.ui.view">
        <field name="name">Usage Pending</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <search string="Usage Pending">
                <filter string="VP Usage" name="pending_usage" domain="[('xquotationtrans_discount_usage','&gt;','30'),('xquotationtrans_usage_quotation','=','usage')]"/>
                <filter string="Pending VP Usage" name="pending_usage" domain="[('state_usage','=','pending')]"/>
                <filter string="Rejected VP Usage" name="pending_usage" domain="[('state_usage','=','rejected')]"/>
            </search>
        </field>
    </record>

    <record id="open_module_tree_usage_transaction_telkomsel_vp" model="ir.actions.act_window">
        <field name="name">Usage Pending</field>
        <field name="res_model">quotation.transaction.telkomsel</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
            <field name="context">{
                "search_default_pending_usage": 30,
                "default_pending_usage": 30}
            </field>
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_usage_pending_vp_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_usage_pending_vp_form')})]"/>
            <field name="search_view_id" ref="view_usage_pending_vp_filter"/>
            <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create Aprroved.
            </p>
        </field>
    </record>
    <menuitem action="open_module_tree_usage_transaction_telkomsel_vp"
        id="menu_open_module_tree_usage_transaction_telkomsel_vp" parent="menu_pending_quotation_main_vp" sequence="3" groups="contract_e.group_admin,contract_e.group_vp"/>

    <!-- Approved Sales -->
    <!-- ORDER -->
    <menuitem id="menu_quotation_approve_main" parent="menu_quotation_root" name="Quotation Approved" sequence="4"/>
    <record id="view_quotation_approve_form" model="ir.ui.view">
        <field name="name">Order Approved form</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <form string="Order Approved" create="false" edit="true">
                <sheet>
                    <header>
                        <button string="Final" type="object"  confirm="Are you sure you want to continue?" name="final_quotation" attrs="{'invisible': [('state', '=', 'final')]}" class="oe_highlight"/>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="xquotationtrans_number_quotation"/>
                            </h1>
                        </div> 
                        <group>
                            <field name="xquotationtrans_usage_quotation"/>
                            <field name="xquotationtrans_sales_contract_id" invisible="1"/>
                            <field name="xquotationtrans_sales_name" invisible="1"/>
                            <field name="xquotationtrans_sales_phone" invisible="1"/>
                            <field name="xquotationtrans_sales_email" invisible="1"/>
                            <field name="xquotationtrans_sales_department" invisible="1"/>
                            <field name="xquotationtrans_name_vp" invisible="1"/>
                            <field name="xquotationtrans_name_gm" invisible="1"/>
                            <field name="xquotationtrans_email_vp" invisible="1"/>
                            <field name="xquotationtrans_email_gm" invisible="1"/>
                            <field name="xquotationtrans_vp_department" invisible="1"/>
                            <field name="xquotationtrans_gm_department" invisible="1"/>
                            <field name="xquotationtrans_sales_position" invisible="1"/>
                            <field name="xquotationtrans_vp_position" invisible="1"/>
                            <field name="xquotationtrans_gm_position" invisible="1"/>
                            <field name="xquotationtrans_number_contract_id" on_change="onchange_xquotationtrans_number_contract_id(xquotationtrans_number_contract_id)"
                                        domain="[('xtransaction_sales_id', '=', xquotationtrans_sales_contract_id)]"
                                        context="{'show_service': 1}"
                                        options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                        </group>
                    <group>
                        <group string="Client">
                            <field name="xquotationtrans_company_npwp"/>
                            <field name="xquotationtrans_company_contract_id"/>
                            <field name="xquotationtrans_company_alamat" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_contract_id"/>
                            <field name="xquotationtrans_client_delegation_jabatan" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_email" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_phone" invisible="1"/>
                            <field name="xquotationtrans_company_product"/>
                            <field name="xquotationtrans_company_brand_category"/>
                            <field name="xquotationtrans_company_name"/>
                            <field name="xquotationtrans_date"/>
                            <field name="xquotationtrans_merchdelegation_name"/>
                            <field name="xquotationtrans_merchdelegation_email"/>
                            <field name="xquotationtrans_merchdelegation_phone"/>
                            <field name="xquotationtrans_invoices_address"/>
                        </group>
                        <group string="Telkomsel">
                            <field name="xquotationtrans_pic_telkomsel"/>
                            <field name="xquotationtrans_pic_telkomsel_phone"/>
                        </group>
                    </group>
                    <group>
                        <!-- ORDER -->
                        <field name="xquotationtrans_list_rate_card_ids" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                               
                                <field name="xquotationtrans_end_date"/>                               
                                <field name="xquotationtrans_qty"/>                               
                                <field name="xquotationtrans_detailinventory_rate"/>
                                <!-- <field name="xquotationtrans_harga_sales"/>     -->              
                                <field name="xquotationtrans_total"/>                               
                            </tree>
                        </field>
                        <field name="xquotationtrans_total_harga" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>
                        <field name="xquotationtrans_discount" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>                           
                        <field name="xquotationtrans_total_hargax" on_change="update_agesm_onchange" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>   
                        <!-- <field name="hargappn"/> -->     
                        <field name="xquotationtrans_discount_ppnx" on_change="xxxx" invisible='1' attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>        
                        <field name="xquotationtrans_total_bayar_fix" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>  
                        <!-- USAGE -->
                        <field name="xquotationtrans_list_rate_card_ids_usage" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'usage')]}">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                               
                                <field name="xquotationtrans_end_date"/>                               
                                <field name="xquotationtrans_qty"/>                               
                                <field name="xquotationtrans_detailinventory_rate"/>
                            </tree>
                        </field>
                        <field name="xquotationtrans_discount_usage" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'usage')]}"/>                           
                    </group>
                    <notebook>
                        <page name="alamatelkomsel" string="Info Telkomsel" invisible="1">
                            <group>
                                <field name="xquotationtrans_alamat_name" invisible="1"/>
                                <field name="xquotationtrans_alamat" invisible="1"/>
                                <field name="xquotationtrans_lantai" invisible="1"/>
                                <field name="xquotationtrans_no_telp" invisible="1"/>
                                <field name="xquotationtrans_facsimile" invisible="1"/>
                                <field name="xquotationtrans_attention" invisible="1"/>
                            </group>
                        </page>  
                        <page name="banktsel" string="Bank Info" invisible="1">
                            <group>
                                <field name="xquotationtrans_account_bank_name" invisible="1"/>
                                <field name="xquotationtrans_bank_name" invisible="1"/> 
                                <field name="xquotationtrans_alamat_bank" invisible="1"/>
                                <field name="xquotationtrans_norek" invisible="1"/>
                            </group>
                        </page>
                        <page name="sign" string="Signature">
                             <group>
                                <field name="xquotationtrans_sign_vp" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_gm" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_sales" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_client_delegation_signature" widget="signature"/>
                            </group>
                        </page>                                                                          
                    </notebook>
                    </sheet>  
                </sheet>    
            </form>
        </field>
    </record>

    <record id="view_quotation_approve_tree" model="ir.ui.view">
        <field name="name">Order Approved tree</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <tree string="Order Approved" create="false" edit="false">
                <field name="xquotationtrans_usage_quotation"/> 
                <field name="xquotationtrans_number_quotation"/>  
                <field name="xquotationtrans_number_contract_id"/>  
                <field name="xquotationtrans_sales_contract_id"/>  
                <field name="xquotationtrans_company_contract_id"/>  
                <field name="xquotationtrans_client_delegation_contract_id"/>  
                <field name="xquotationtrans_total_harga"/> 
                <field name="xquotationtrans_discount"/> 
                <field name="xquotationtrans_total_bayar_fix"/> 
                <field name="state"/>
            </tree>
        </field>
    </record>

    <record id="view_quotation_approve_filter" model="ir.ui.view">
        <field name="name">Order Approved</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <search string="Order Approved">
                 <filter string="Approved Order" name="approved_quotation" domain="[('state','=','approved'),('xquotationtrans_usage_quotation','=','order')]"/>   
            </search>
        </field>
    </record>

    <record id="open_module_tree_quotation_approve_telkomsel" model="ir.actions.act_window">
        <field name="name">Order Approved</field>
        <field name="res_model">quotation.transaction.telkomsel</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
            <field name="context">{
                "search_default_approved_quotation": 3,
                "default_approved_quotation": 3}
            </field>
<!--             <field name="domain">[]</field> -->
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_quotation_approve_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_quotation_approve_form')})]"/>
            <field name="search_view_id" ref="view_quotation_approve_filter"/>
            <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create Order Approved.
            </p>
        </field>
    </record>

    <menuitem action="open_module_tree_quotation_approve_telkomsel"
            id="menu_open_module_tree_quotation_approve_telkomsel"
            parent="menu_quotation_approve_main"
            sequence="3" groups="contract_e.group_admin,contract_e.group_sales"/>   

    <!-- usage -->
    <record id="view_usage_approve_form" model="ir.ui.view">
        <field name="name">Usage Approved form</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <form string="Usage Approved" create="false" edit="true">
                <sheet>
                    <header>
                        <button string="Final" type="object"  confirm="Are you sure you want to continue?" name="final_usage" attrs="{'invisible': [('state_usage', '=', 'final')]}" class="oe_highlight"/>
                        <field name="state_usage" widget="statusbar"/>
                    </header>                    
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="xquotationtrans_number_quotation"/>
                            </h1>
                        </div> 
                        <group>
                            <field name="xquotationtrans_usage_quotation"/>
                            <field name="xquotationtrans_sales_contract_id" invisible="1"/>
                            <field name="xquotationtrans_sales_name" invisible="1"/>
                            <field name="xquotationtrans_sales_phone" invisible="1"/>
                            <field name="xquotationtrans_sales_email" invisible="1"/>
                            <field name="xquotationtrans_sales_department" invisible="1"/>
                            <field name="xquotationtrans_name_vp" invisible="1"/>
                            <field name="xquotationtrans_name_gm" invisible="1"/>
                            <field name="xquotationtrans_email_vp" invisible="1"/>
                            <field name="xquotationtrans_email_gm" invisible="1"/>
                            <field name="xquotationtrans_vp_department" invisible="1"/>
                            <field name="xquotationtrans_gm_department" invisible="1"/>
                            <field name="xquotationtrans_sales_position" invisible="1"/>
                            <field name="xquotationtrans_vp_position" invisible="1"/>
                            <field name="xquotationtrans_gm_position" invisible="1"/>
                            <field name="xquotationtrans_number_contract_id" on_change="onchange_xquotationtrans_number_contract_id(xquotationtrans_number_contract_id)"
                                        domain="[('xtransaction_sales_id', '=', xquotationtrans_sales_contract_id)]"
                                        context="{'show_service': 1}"
                                        options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                        </group>
                    <group>
                        <group string="Client">
                            <field name="xquotationtrans_company_npwp"/>
                            <field name="xquotationtrans_company_contract_id"/>
                            <field name="xquotationtrans_company_alamat" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_contract_id"/>
                            <field name="xquotationtrans_client_delegation_jabatan" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_email" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_phone" invisible="1"/>
                            <field name="xquotationtrans_company_product"/>
                            <field name="xquotationtrans_company_brand_category"/>
                            <field name="xquotationtrans_company_name"/>
                            <field name="xquotationtrans_date"/>
                            <field name="xquotationtrans_merchdelegation_name"/>
                            <field name="xquotationtrans_merchdelegation_email"/>
                            <field name="xquotationtrans_merchdelegation_phone"/>
                            <field name="xquotationtrans_invoices_address"/>
                        </group>
                        <group string="Telkomsel">
                            <field name="xquotationtrans_pic_telkomsel"/>
                            <field name="xquotationtrans_pic_telkomsel_phone"/>
                        </group>
                    </group>
                    <group>
                        <!-- ORDER -->
                        <field name="xquotationtrans_list_rate_card_ids" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                               
                                <field name="xquotationtrans_end_date"/>                               
                                <field name="xquotationtrans_qty"/>                               
                                <field name="xquotationtrans_detailinventory_rate"/>
                                <!-- <field name="xquotationtrans_harga_sales"/>     -->              
                                <field name="xquotationtrans_total"/>                               
                            </tree>
                        </field>
                        <field name="xquotationtrans_total_harga" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>
                        <field name="xquotationtrans_discount" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>                           
                        <field name="xquotationtrans_total_hargax" on_change="update_agesm_onchange" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>   
                        <!-- <field name="hargappn"/> -->     
                        <field name="xquotationtrans_discount_ppnx" on_change="xxxx" invisible='1' attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>        
                        <field name="xquotationtrans_total_bayar_fix" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>  
                        <!-- USAGE -->
                        <field name="xquotationtrans_list_rate_card_ids_usage" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'usage')]}">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                               
                                <field name="xquotationtrans_end_date"/>                               
                                <field name="xquotationtrans_qty"/>                               
                                <field name="xquotationtrans_detailinventory_rate"/>
                            </tree>
                        </field>
                        <field name="xquotationtrans_discount_usage" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'usage')]}"/>                           
                    </group>
                    <notebook>
                        <page name="alamatelkomsel" string="Info Telkomsel" invisible="1">
                            <group>
                                <field name="xquotationtrans_alamat_name" invisible="1"/>
                                <field name="xquotationtrans_alamat" invisible="1"/>
                                <field name="xquotationtrans_lantai" invisible="1"/>
                                <field name="xquotationtrans_no_telp" invisible="1"/>
                                <field name="xquotationtrans_facsimile" invisible="1"/>
                                <field name="xquotationtrans_attention" invisible="1"/>
                            </group>
                        </page>  
                        <page name="banktsel" string="Bank Info" invisible="1">
                            <group>
                                <field name="xquotationtrans_account_bank_name" invisible="1"/>
                                <field name="xquotationtrans_bank_name" invisible="1"/> 
                                <field name="xquotationtrans_alamat_bank" invisible="1"/>
                                <field name="xquotationtrans_norek" invisible="1"/>
                            </group>
                        </page>  
                        <page name="sign" string="Signature">
                             <group>
                                <field name="xquotationtrans_sign_vp" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_gm" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_sales" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_client_delegation_signature" widget="signature"/>
                            </group>
                        </page>                                                                        
                    </notebook>
                    </sheet>  
                </sheet>    
            </form>
        </field>
    </record>

    <record id="view_usage_approve_tree" model="ir.ui.view">
        <field name="name">Usage Approved tree</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <tree string="Usage Approved" create="false" edit="false">
                <field name="xquotationtrans_usage_quotation"/> 
                <field name="xquotationtrans_number_quotation"/>  
                <field name="xquotationtrans_number_contract_id"/>  
                <field name="xquotationtrans_sales_contract_id"/>  
                <field name="xquotationtrans_company_contract_id"/>  
                <field name="xquotationtrans_client_delegation_contract_id"/>  
                <field name="xquotationtrans_discount_usage"/> 
                <field name="state_usage"/> 
            </tree>
        </field>
    </record>

    <record id="view_usage_approve_filter" model="ir.ui.view">
        <field name="name">Usage Approved</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <search string="Usage Approved">
                 <filter string="Approved Usage" name="approved_usage" domain="[('state_usage','=','approved'),('xquotationtrans_usage_quotation','=','usage')]"/>   
            </search>
        </field>
    </record>

    <record id="open_module_tree_usage_approve_telkomsel" model="ir.actions.act_window">
        <field name="name">Usage Approved</field>
        <field name="res_model">quotation.transaction.telkomsel</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
            <field name="context">{
                "search_default_approved_usage": 3,
                "default_approved_usage": 3}
            </field>
<!--             <field name="domain">[]</field> -->
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_usage_approve_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_usage_approve_form')})]"/>
            <field name="search_view_id" ref="view_usage_approve_filter"/>
            <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create Usage Approved.
            </p>
        </field>
    </record>

    <menuitem action="open_module_tree_usage_approve_telkomsel"
            id="menu_open_module_tree_usage_approve_telkomsel"
            parent="menu_quotation_approve_main"
            sequence="4" groups="contract_e.group_admin,contract_e.group_sales"/>      

    <!-- APPROVED GM -->
    <menuitem id="menu_approved_quotation_main_gm" parent="menu_quotation_root" name="Approved Quotation GM" sequence="5"/>
    <!-- Quotation -->
    <!-- ORDER -->
    <record id="view_quotation_approved_gm_form" model="ir.ui.view">
        <field name="name">Order Approved form</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <form string="Order Approved" create="false" edit="false">
                <sheet>
                    <header>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="xquotationtrans_number_quotation" readonly="1"/>
                            </h1>
                        </div>  
                        <group>
                            <field name="xquotationtrans_usage_quotation"/>
                            <field name="xquotationtrans_number_contract_id" on_change="onchange_xquotationtrans_number_contract_id(xquotationtrans_number_contract_id)" 
                                                context="{'show_service': 1}"
                                                options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>     
                            <field name="xquotationtrans_sales_contract_id"/>
                            <field name="xquotationtrans_sales_phone" invisible="1"/>
                            <field name="xquotationtrans_sales_email" invisible="1"/>
                            <field name="xquotationtrans_name_gm" invisible="1"/>
                            <field name="xquotationtrans_email_gm" invisible="1"/>
                        </group>
                    <group>
                        <group string="Client">
                            <field name="xquotationtrans_company_npwp"/>
                            <field name="xquotationtrans_company_contract_id"/>
                            <field name="xquotationtrans_company_alamat" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_contract_id"/>
                            <field name="xquotationtrans_client_delegation_jabatan" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_email" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_phone" invisible="1"/>
                            <field name="xquotationtrans_company_product"/>
                            <field name="xquotationtrans_company_brand_category"/>
                            <field name="xquotationtrans_company_name"/>
                            <field name="xquotationtrans_date"/>
                            <field name="xquotationtrans_merchdelegation_name"/>
                            <field name="xquotationtrans_merchdelegation_email"/>
                            <field name="xquotationtrans_merchdelegation_phone"/>
                            <field name="xquotationtrans_invoices_address"/>
                        </group>
                        <group string="Telkomsel">
                            <field name="xquotationtrans_pic_telkomsel"/>
                            <field name="xquotationtrans_pic_telkomsel_phone"/>
                        </group>
                    </group>
                    <group>
                        <field name="xquotationtrans_list_rate_card_ids">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                                
                                <field name="xquotationtrans_end_date"/>                                
                                <field name="xquotationtrans_qty"/>                                
                                <field name="xquotationtrans_detailinventory_rate"/>
                                <!-- <field name="xquotationtrans_harga_sales"/>     -->               
                                <field name="xquotationtrans_total"/>                                
                            </tree>
                        </field>
                        <field name="xquotationtrans_total_harga"/> 
                        <field name="xquotationtrans_discount"/>                            
                        <field name="xquotationtrans_total_hargax" on_change="update_agesm_onchange"/>    
                        <field name="hargappn"/>      
                        <field name="xquotationtrans_discount_ppnx" on_change="xxxx" invisible="1"/>           
                        <field name="xquotationtrans_total_bayar_fix"/>           
                    </group>
                    <notebook>
                        <page name="alamatelkomsel" string="Info Telkomsel" invisible="1">
                            <group>
                                <field name="xquotationtrans_alamat_name" invisible="1"/>
                                <field name="xquotationtrans_alamat" invisible="1"/>
                                <field name="xquotationtrans_lantai" invisible="1"/>
                                <field name="xquotationtrans_no_telp" invisible="1"/>
                                <field name="xquotationtrans_facsimile" invisible="1"/>
                                <field name="xquotationtrans_attention" invisible="1"/>
                            </group>
                        </page>  
                        <page name="banktsel" string="Bank Info" invisible="1">
                            <group>
                                <field name="xquotationtrans_account_bank_name" invisible="1"/>
                                <field name="xquotationtrans_bank_name" invisible="1"/> 
                                <field name="xquotationtrans_alamat_bank" invisible="1"/>
                                <field name="xquotationtrans_norek" invisible="1"/>
                            </group>
                        </page>
                        <page name="sign" string="Signature">
                             <group>
                                <field name="xquotationtrans_sign_vp" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_gm" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_sales" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_client_delegation_signature" widget="signature"/>
                            </group>
                        </page>                                                                          
                    </notebook>
                    </sheet>  
                </sheet>    
            </form>
        </field>
    </record>

    <record id="view_quotation_approved_gm_tree" model="ir.ui.view">
        <field name="name">Order Approved tree</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <tree string="Order Approved" create="false" edit="false">
                <field name="xquotationtrans_usage_quotation"/> 
                <field name="xquotationtrans_number_quotation"/>  
                <field name="xquotationtrans_number_contract_id"/>  
                <field name="xquotationtrans_sales_contract_id"/>  
                <field name="xquotationtrans_company_contract_id"/>  
                <field name="xquotationtrans_client_delegation_contract_id"/>  
                <field name="xquotationtrans_total_harga"/> 
                <field name="xquotationtrans_discount"/> 
                <field name="xquotationtrans_total_bayar_fix"/> 
                <field name="state"/>  
            </tree>
        </field>
    </record>

    <record id="view_quotation_approved_gm_filter" model="ir.ui.view">
        <field name="name">Order Approved</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <search string="Order Approved">
                <!-- <filter string="Approved" name="approved_quotation" domain="[('state','=','approved'),('xquotationtrans_usage_quotation','=','order')]"/>    -->               
                <filter string="Approved GM" name="approved_quotation" domain="[('xquotationtrans_discount','&lt;=','30'),('xquotationtrans_usage_quotation','=','order')]"/>
                <filter string="Approved GM Order" name="approved_quotation" domain="[('state','=','approved')]"/>
            </search>
        </field>
    </record>

    <record id="open_module_tree_approved_quotation_telkomsel_gm" model="ir.actions.act_window">
        <field name="name">Order Approved</field>
        <field name="res_model">quotation.transaction.telkomsel</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
            <field name="context">{
                "search_default_approved_quotation": 30,
                "default_approved_quotation": 30}
            </field>
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_quotation_approved_gm_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_quotation_approved_gm_form')})]"/>
            <field name="search_view_id" ref="view_quotation_approved_gm_filter"/>
            <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create Aprroved.
            </p>
        </field>
    </record>
    <menuitem action="open_module_tree_approved_quotation_telkomsel_gm"
        id="menu_open_module_tree_approved_quotation_telkomsel_gm" parent="menu_approved_quotation_main_gm" sequence="2" groups="contract_e.group_admin,contract_e.group_gm"/>
    <!-- Usage -->
    <record id="view_usage_approved_gm_form" model="ir.ui.view">
        <field name="name">Usage Approved form</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <form string="Usage Approved" create="false" edit="false">>
                <sheet>
                    <header>
                        <field name="state_usage" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="xquotationtrans_number_quotation" readonly="1"/>
                            </h1>
                        </div>  
                        <group>
                            <field name="xquotationtrans_usage_quotation"/>
                            <field name="xquotationtrans_number_contract_id" on_change="onchange_xquotationtrans_number_contract_id(xquotationtrans_number_contract_id)" 
                                                context="{'show_service': 1}"
                                                options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>     
                            <field name="xquotationtrans_sales_contract_id"/>
                            <field name="xquotationtrans_sales_phone" invisible="1"/>
                            <field name="xquotationtrans_sales_email" invisible="1"/>
                            <field name="xquotationtrans_name_gm" invisible="1"/>
                            <field name="xquotationtrans_email_gm" invisible="1"/>
                        </group>
                    <group>
                        <group string="Client">
                            <field name="xquotationtrans_company_npwp"/>
                            <field name="xquotationtrans_company_contract_id"/>
                            <field name="xquotationtrans_company_alamat" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_contract_id"/>
                            <field name="xquotationtrans_client_delegation_jabatan" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_email" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_phone" invisible="1"/>
                            <field name="xquotationtrans_company_product"/>
                            <field name="xquotationtrans_company_brand_category"/>
                            <field name="xquotationtrans_company_name"/>
                            <field name="xquotationtrans_date"/>
                            <field name="xquotationtrans_merchdelegation_name"/>
                            <field name="xquotationtrans_merchdelegation_email"/>
                            <field name="xquotationtrans_merchdelegation_phone"/>
                            <field name="xquotationtrans_invoices_address"/>
                        </group>
                        <group string="Telkomsel">
                            <field name="xquotationtrans_pic_telkomsel"/>
                            <field name="xquotationtrans_pic_telkomsel_phone"/>
                        </group>
                    </group>
                    <group>
                        <field name="xquotationtrans_list_rate_card_ids_usage">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                                
                                <field name="xquotationtrans_end_date"/>                                
                                <field name="xquotationtrans_qty"/>                                
                                <field name="xquotationtrans_detailinventory_rate"/>                     
                            </tree>
                        </field>
                        <field name="xquotationtrans_discount_usage"/>                            
                    </group>
                    <notebook>
                        <page name="alamatelkomsel" string="Info Telkomsel" invisible="1">
                            <group>
                                <field name="xquotationtrans_alamat_name" invisible="1"/>
                                <field name="xquotationtrans_alamat" invisible="1"/>
                                <field name="xquotationtrans_lantai" invisible="1"/>
                                <field name="xquotationtrans_no_telp" invisible="1"/>
                                <field name="xquotationtrans_facsimile" invisible="1"/>
                                <field name="xquotationtrans_attention" invisible="1"/>
                            </group>
                        </page>  
                        <page name="banktsel" string="Bank Info" invisible="1">
                            <group>
                                <field name="xquotationtrans_account_bank_name" invisible="1"/>
                                <field name="xquotationtrans_bank_name" invisible="1"/> 
                                <field name="xquotationtrans_alamat_bank" invisible="1"/>
                                <field name="xquotationtrans_norek" invisible="1"/>
                            </group>
                        </page>
                        <page name="sign" string="Signature">
                             <group>
                                <field name="xquotationtrans_sign_vp" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_gm" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_sales" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_client_delegation_signature" widget="signature"/>
                            </group>
                        </page>                                                                          
                    </notebook>
                    </sheet>  
                </sheet>    
            </form>
        </field>
    </record>

    <record id="view_usage_approved_gm_tree" model="ir.ui.view">
        <field name="name">Usage Approved tree</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <tree string="Usage Approved" create="false" edit="false">
                <field name="xquotationtrans_usage_quotation"/> 
                <field name="xquotationtrans_number_quotation"/>  
                <field name="xquotationtrans_number_contract_id"/>  
                <field name="xquotationtrans_sales_contract_id"/>  
                <field name="xquotationtrans_company_contract_id"/>  
                <field name="xquotationtrans_client_delegation_contract_id"/>  
                <field name="xquotationtrans_discount_usage"/> 
                <field name="state_usage"/>   
            </tree>
        </field>
    </record>

    <record id="view_usage_approved_gm_filter" model="ir.ui.view">
        <field name="name">Usage Approved</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <search string="Usage Pending">
                <filter string="Approved GM" name="approved_usage" domain="[('xquotationtrans_discount_usage','&lt;=','30'),('xquotationtrans_usage_quotation','=','usage')]"/>
                <filter string="Approved GM Usage" name="approved_quotation" domain="[('state_usage','=','approved')]"/>
            </search>
        </field>
    </record>

    <record id="open_module_tree_usage_approved_telkomsel_gm" model="ir.actions.act_window">
        <field name="name">Usage Approved</field>
        <field name="res_model">quotation.transaction.telkomsel</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
            <field name="context">{
                "search_default_approved_usage": 30,
                "default_approved_usage": 30}
            </field>
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_usage_approved_gm_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_usage_approved_gm_form')})]"/>
            <field name="search_view_id" ref="view_usage_approved_gm_filter"/>
            <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create Aprroved.
            </p>
        </field>
    </record>
    <menuitem action="open_module_tree_usage_approved_telkomsel_gm"
        id="menu_open_module_tree_usage_approved_telkomsel_gm" parent="menu_approved_quotation_main_gm" sequence="3" groups="contract_e.group_admin,contract_e.group_gm"/>

    <!-- APPROVED VP -->
    <menuitem id="menu_approved_quotation_main_vp" parent="menu_quotation_root" name="Approved Quotation VP" sequence="6"/>
    <!-- Quotation -->
    <!-- ORDER -->
    <record id="view_quotation_approved_vp_form" model="ir.ui.view">
        <field name="name">Order Approved form</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <form string="Order Approved" create="false" edit="false">
                <sheet>
                    <header>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="xquotationtrans_number_quotation" readonly="1"/>
                            </h1>
                        </div>  
                        <group>
                            <field name="xquotationtrans_usage_quotation"/>
                            <field name="xquotationtrans_number_contract_id" on_change="onchange_xquotationtrans_number_contract_id(xquotationtrans_number_contract_id)" 
                                                context="{'show_service': 1}"
                                                options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>     
                            <field name="xquotationtrans_sales_contract_id"/>
                            <field name="xquotationtrans_sales_phone" invisible="1"/>
                            <field name="xquotationtrans_sales_email" invisible="1"/>
                            <field name="xquotationtrans_name_gm" invisible="1"/>
                            <field name="xquotationtrans_email_gm" invisible="1"/>
                        </group>
                    <group>
                        <group string="Client">
                            <field name="xquotationtrans_company_npwp"/>
                            <field name="xquotationtrans_company_contract_id"/>
                            <field name="xquotationtrans_company_alamat" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_contract_id"/>
                            <field name="xquotationtrans_client_delegation_jabatan" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_email" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_phone" invisible="1"/>
                            <field name="xquotationtrans_company_product"/>
                            <field name="xquotationtrans_company_brand_category"/>
                            <field name="xquotationtrans_company_name"/>
                            <field name="xquotationtrans_date"/>
                            <field name="xquotationtrans_merchdelegation_name"/>
                            <field name="xquotationtrans_merchdelegation_email"/>
                            <field name="xquotationtrans_merchdelegation_phone"/>
                            <field name="xquotationtrans_invoices_address"/>
                        </group>
                        <group string="Telkomsel">
                            <field name="xquotationtrans_pic_telkomsel"/>
                            <field name="xquotationtrans_pic_telkomsel_phone"/>
                        </group>
                    </group>
                    <group>
                        <field name="xquotationtrans_list_rate_card_ids">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                                
                                <field name="xquotationtrans_end_date"/>                                
                                <field name="xquotationtrans_qty"/>                                
                                <field name="xquotationtrans_detailinventory_rate"/>
                                <!-- <field name="xquotationtrans_harga_sales"/>     -->               
                                <field name="xquotationtrans_total"/>                                
                            </tree>
                        </field>
                        <field name="xquotationtrans_total_harga"/> 
                        <field name="xquotationtrans_discount"/>                            
                        <field name="xquotationtrans_total_hargax" on_change="update_agesm_onchange"/>    
                        <field name="hargappn"/>      
                        <field name="xquotationtrans_discount_ppnx" on_change="xxxx" invisible="1"/>           
                        <field name="xquotationtrans_total_bayar_fix"/>           
                    </group>
                    <notebook>
                        <page name="alamatelkomsel" string="Info Telkomsel" invisible="1">
                            <group>
                                <field name="xquotationtrans_alamat_name" invisible="1"/>
                                <field name="xquotationtrans_alamat" invisible="1"/>
                                <field name="xquotationtrans_lantai" invisible="1"/>
                                <field name="xquotationtrans_no_telp" invisible="1"/>
                                <field name="xquotationtrans_facsimile" invisible="1"/>
                                <field name="xquotationtrans_attention" invisible="1"/>
                            </group>
                        </page>  
                        <page name="banktsel" string="Bank Info" invisible="1">
                            <group>
                                <field name="xquotationtrans_account_bank_name" invisible="1"/>
                                <field name="xquotationtrans_bank_name" invisible="1"/> 
                                <field name="xquotationtrans_alamat_bank" invisible="1"/>
                                <field name="xquotationtrans_norek" invisible="1"/>
                            </group>
                        </page>
                        <page name="sign" string="Signature">
                             <group>
                                <field name="xquotationtrans_sign_vp" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_gm" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_sales" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_client_delegation_signature" widget="signature"/>
                            </group>
                        </page>                                                                          
                    </notebook>
                    </sheet>  
                </sheet>    
            </form>
        </field>
    </record>

    <record id="view_quotation_approved_vp_tree" model="ir.ui.view">
        <field name="name">Order Approved tree</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <tree string="Order Approved" create="false" edit="false">
                <field name="xquotationtrans_usage_quotation"/> 
                <field name="xquotationtrans_number_quotation"/>  
                <field name="xquotationtrans_number_contract_id"/>  
                <field name="xquotationtrans_sales_contract_id"/>  
                <field name="xquotationtrans_company_contract_id"/>  
                <field name="xquotationtrans_client_delegation_contract_id"/>  
                <field name="xquotationtrans_total_harga"/> 
                <field name="xquotationtrans_discount"/> 
                <field name="xquotationtrans_total_bayar_fix"/> 
                <field name="state"/>  
            </tree>
        </field>
    </record>

    <record id="view_quotation_approved_vp_filter" model="ir.ui.view">
        <field name="name">Order Approved</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <search string="Order Approved">
                <filter string="Approved VP" name="approved_quotation" domain="[('xquotationtrans_discount','&gt;','30'),('xquotationtrans_usage_quotation','=','order')]"/>
                <filter string="Approved VP Order" name="approved_quotation" domain="[('state','=','approved')]"/>
            </search>
        </field>
    </record>

    <record id="open_module_tree_quotation_approved_telkomsel_vp" model="ir.actions.act_window">
        <field name="name">Order Approved</field>
        <field name="res_model">quotation.transaction.telkomsel</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
            <field name="context">{
                "search_default_approved_quotation": 30,
                "default_approved_quotation": 30}
            </field>
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_quotation_approved_vp_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_quotation_approved_vp_form')})]"/>
            <field name="search_view_id" ref="view_quotation_approved_vp_filter"/>
            <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create Aprroved.
            </p>
        </field>
    </record>
    <menuitem action="open_module_tree_quotation_approved_telkomsel_vp"
        id="menu_open_module_tree_quotation_approved_telkomsel_vp" parent="menu_approved_quotation_main_vp" sequence="2" groups="contract_e.group_admin,contract_e.group_vp"/>
    <!-- Usage -->
    <record id="view_usage_approved_vp_form" model="ir.ui.view">
        <field name="name">Usage Approved form</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <form string="Usage Approved" create="false" edit="false">
                <sheet>
                    <header>
                        <field name="state_usage" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="xquotationtrans_number_quotation" readonly="1"/>
                            </h1>
                        </div>  
                        <group>
                            <field name="xquotationtrans_usage_quotation"/>
                            <field name="xquotationtrans_number_contract_id" on_change="onchange_xquotationtrans_number_contract_id(xquotationtrans_number_contract_id)" 
                                                context="{'show_service': 1}"
                                                options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>     
                            <field name="xquotationtrans_sales_contract_id"/>
                            <field name="xquotationtrans_sales_phone" invisible="1"/>
                            <field name="xquotationtrans_sales_email" invisible="1"/>
                            <field name="xquotationtrans_name_gm" invisible="1"/>
                            <field name="xquotationtrans_email_gm" invisible="1"/>
                        </group>
                    <group>
                        <group string="Client">
                            <field name="xquotationtrans_company_npwp"/>
                            <field name="xquotationtrans_company_contract_id"/>
                            <field name="xquotationtrans_company_alamat" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_contract_id"/>
                            <field name="xquotationtrans_client_delegation_jabatan" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_email" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_phone" invisible="1"/>
                            <field name="xquotationtrans_company_product"/>
                            <field name="xquotationtrans_company_brand_category"/>
                            <field name="xquotationtrans_company_name"/>
                            <field name="xquotationtrans_date"/>
                            <field name="xquotationtrans_merchdelegation_name"/>
                            <field name="xquotationtrans_merchdelegation_email"/>
                            <field name="xquotationtrans_merchdelegation_phone"/>
                            <field name="xquotationtrans_invoices_address"/>
                        </group>
                        <group string="Telkomsel">
                            <field name="xquotationtrans_pic_telkomsel"/>
                            <field name="xquotationtrans_pic_telkomsel_phone"/>
                        </group>
                    </group>
                    <group>
                        <field name="xquotationtrans_list_rate_card_ids_usage">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                                
                                <field name="xquotationtrans_end_date"/>                                
                                <field name="xquotationtrans_qty"/>                                
                                <field name="xquotationtrans_detailinventory_rate"/>                     
                            </tree>
                        </field>
                        <field name="xquotationtrans_discount_usage"/>                            
                    </group>
                    <notebook>
                        <page name="alamatelkomsel" string="Info Telkomsel" invisible="1">
                            <group>
                                <field name="xquotationtrans_alamat_name" invisible="1"/>
                                <field name="xquotationtrans_alamat" invisible="1"/>
                                <field name="xquotationtrans_lantai" invisible="1"/>
                                <field name="xquotationtrans_no_telp" invisible="1"/>
                                <field name="xquotationtrans_facsimile" invisible="1"/>
                                <field name="xquotationtrans_attention" invisible="1"/>
                            </group>
                        </page>  
                        <page name="banktsel" string="Bank Info" invisible="1">
                            <group>
                                <field name="xquotationtrans_account_bank_name" invisible="1"/>
                                <field name="xquotationtrans_bank_name" invisible="1"/> 
                                <field name="xquotationtrans_alamat_bank" invisible="1"/>
                                <field name="xquotationtrans_norek" invisible="1"/>
                            </group>
                        </page>
                        <page name="sign" string="Signature">
                             <group>
                                <field name="xquotationtrans_sign_vp" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_gm" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_sales" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_client_delegation_signature" widget="signature"/>
                            </group>
                        </page>                                                                          
                    </notebook>
                    </sheet>  
                </sheet>    
            </form>
        </field>
    </record>

    <record id="view_usage_approved_vp_tree" model="ir.ui.view">
        <field name="name">Usage Approved tree</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <tree string="Usage Approved" create="false" edit="false">
                <field name="xquotationtrans_usage_quotation"/> 
                <field name="xquotationtrans_number_quotation"/>  
                <field name="xquotationtrans_number_contract_id"/>  
                <field name="xquotationtrans_sales_contract_id"/>  
                <field name="xquotationtrans_company_contract_id"/>  
                <field name="xquotationtrans_client_delegation_contract_id"/>  
                <field name="xquotationtrans_discount_usage"/> 
                <field name="state_usage"/>   
            </tree>
        </field>
    </record>

    <record id="view_usage_approved_vp_filter" model="ir.ui.view">
        <field name="name">Usage Approved</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <search string="Usage Approved">
                <filter string="Approved VP" name="approved_usage" domain="[('xquotationtrans_discount_usage','&gt;','30'),('xquotationtrans_usage_quotation','=','usage'),('xquotationtrans_usage_quotation','=','usage')]"/>
                <filter string="Approved VP Order" name="approved_quotation" domain="[('state_usage','=','approved')]"/>
            </search>
        </field>
    </record>

    <record id="open_module_tree_usage_approved_telkomsel_vp" model="ir.actions.act_window">
        <field name="name">Usage Approved</field>
        <field name="res_model">quotation.transaction.telkomsel</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
            <field name="context">{
                "search_default_approved_usage": 30,
                "default_approved_usage": 30}
            </field>
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_usage_approved_vp_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_usage_approved_vp_form')})]"/>
            <field name="search_view_id" ref="view_usage_approved_vp_filter"/>
            <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create Aprroved.
            </p>
        </field>
    </record>
    <menuitem action="open_module_tree_usage_approved_telkomsel_vp"
        id="menu_open_module_tree_usage_approved_telkomsel_vp" parent="menu_approved_quotation_main_vp" sequence="3" groups="contract_e.group_admin,contract_e.group_vp"/>

        <!-- FINAL Sales -->
    <!-- ORDER -->
    <menuitem id="menu_quotation_final_main_sales" parent="menu_quotation_root" name="Quotation Final" sequence="7"/>
    <record id="view_quotation_final_form" model="ir.ui.view">
        <field name="name">Order Final form</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <form string="Order Final" create="false" edit="false">
                <sheet>
                    <header>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="xquotationtrans_number_quotation"/>
                            </h1>
                        </div> 
                        <group>
                            <field name="xquotationtrans_usage_quotation"/>
                            <field name="xquotationtrans_sales_contract_id" invisible="1"/>
                            <field name="xquotationtrans_sales_name" invisible="1"/>
                            <field name="xquotationtrans_sales_phone" invisible="1"/>
                            <field name="xquotationtrans_sales_email" invisible="1"/>
                            <field name="xquotationtrans_sales_department" invisible="1"/>
                            <field name="xquotationtrans_name_vp" invisible="1"/>
                            <field name="xquotationtrans_name_gm" invisible="1"/>
                            <field name="xquotationtrans_email_vp" invisible="1"/>
                            <field name="xquotationtrans_email_gm" invisible="1"/>
                            <field name="xquotationtrans_vp_department" invisible="1"/>
                            <field name="xquotationtrans_gm_department" invisible="1"/>
                            <field name="xquotationtrans_sales_position" invisible="1"/>
                            <field name="xquotationtrans_vp_position" invisible="1"/>
                            <field name="xquotationtrans_gm_position" invisible="1"/>
                            <field name="xquotationtrans_number_contract_id" on_change="onchange_xquotationtrans_number_contract_id(xquotationtrans_number_contract_id)"
                                        domain="[('xtransaction_sales_id', '=', xquotationtrans_sales_contract_id)]"
                                        context="{'show_service': 1}"
                                        options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                        </group>
                    <group>
                        <group string="Client">
                            <field name="xquotationtrans_company_npwp"/>
                            <field name="xquotationtrans_company_contract_id"/>
                            <field name="xquotationtrans_company_alamat" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_contract_id"/>
                            <field name="xquotationtrans_client_delegation_jabatan" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_email" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_phone" invisible="1"/>
                            <field name="xquotationtrans_company_product"/>
                            <field name="xquotationtrans_company_brand_category"/>
                            <field name="xquotationtrans_company_name"/>
                            <field name="xquotationtrans_date"/>
                            <field name="xquotationtrans_merchdelegation_name"/>
                            <field name="xquotationtrans_merchdelegation_email"/>
                            <field name="xquotationtrans_merchdelegation_phone"/>
                            <field name="xquotationtrans_invoices_address"/>
                        </group>
                        <group string="Telkomsel">
                            <field name="xquotationtrans_pic_telkomsel"/>
                            <field name="xquotationtrans_pic_telkomsel_phone"/>
                        </group>
                    </group>
                    <group>
                        <!-- ORDER -->
                        <field name="xquotationtrans_list_rate_card_ids" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                               
                                <field name="xquotationtrans_end_date"/>                               
                                <field name="xquotationtrans_qty"/>                               
                                <field name="xquotationtrans_detailinventory_rate"/>
                                <!-- <field name="xquotationtrans_harga_sales"/>     -->              
                                <field name="xquotationtrans_total"/>                               
                            </tree>
                        </field>
                        <field name="xquotationtrans_total_harga" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>
                        <field name="xquotationtrans_discount" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>                           
                        <field name="xquotationtrans_total_hargax" on_change="update_agesm_onchange" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>   
                        <!-- <field name="hargappn"/> -->     
                        <field name="xquotationtrans_discount_ppnx" on_change="xxxx" invisible='1' attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>        
                        <field name="xquotationtrans_total_bayar_fix" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>  
                        <!-- USAGE -->
                        <field name="xquotationtrans_list_rate_card_ids_usage" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'usage')]}">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                               
                                <field name="xquotationtrans_end_date"/>                               
                                <field name="xquotationtrans_qty"/>                               
                                <field name="xquotationtrans_detailinventory_rate"/>
                            </tree>
                        </field>
                        <field name="xquotationtrans_discount_usage" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'usage')]}"/>                           
                    </group>
                    <notebook>
                        <page name="alamatelkomsel" string="Info Telkomsel" invisible="1">
                            <group>
                                <field name="xquotationtrans_alamat_name" invisible="1"/>
                                <field name="xquotationtrans_alamat" invisible="1"/>
                                <field name="xquotationtrans_lantai" invisible="1"/>
                                <field name="xquotationtrans_no_telp" invisible="1"/>
                                <field name="xquotationtrans_facsimile" invisible="1"/>
                                <field name="xquotationtrans_attention" invisible="1"/>
                            </group>
                        </page>  
                        <page name="banktsel" string="Bank Info" invisible="1">
                            <group>
                                <field name="xquotationtrans_account_bank_name" invisible="1"/>
                                <field name="xquotationtrans_bank_name" invisible="1"/> 
                                <field name="xquotationtrans_alamat_bank" invisible="1"/>
                                <field name="xquotationtrans_norek" invisible="1"/>
                            </group>
                        </page>
                        <page name="sign" string="Signature">
                             <group>
                                <field name="xquotationtrans_sign_vp" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_gm" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_sales" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_client_delegation_signature" widget="signature"/>
                            </group>
                        </page>                                                                          
                    </notebook>
                    </sheet>  
                </sheet>    
            </form>
        </field>
    </record>

    <record id="view_quotation_final_tree" model="ir.ui.view">
        <field name="name">Order Final tree</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <tree string="Order Final" create="false" edit="false">
                <field name="xquotationtrans_usage_quotation"/> 
                <field name="xquotationtrans_number_quotation"/>  
                <field name="xquotationtrans_number_contract_id"/>  
                <field name="xquotationtrans_sales_contract_id"/>  
                <field name="xquotationtrans_company_contract_id"/>  
                <field name="xquotationtrans_client_delegation_contract_id"/>  
                <field name="xquotationtrans_total_harga"/> 
                <field name="xquotationtrans_discount"/> 
                <field name="xquotationtrans_total_bayar_fix"/> 
                <field name="state"/>
            </tree>
        </field>
    </record>

    <record id="view_quotation_final_filter" model="ir.ui.view">
        <field name="name">Order Final</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <search string="Order Final">
                 <filter string="Final Order" name="final_quotation" domain="[('state','=','final'),('xquotationtrans_usage_quotation','=','order')]"/>   
            </search>
        </field>
    </record>

    <record id="open_module_tree_quotation_final_telkomsel" model="ir.actions.act_window">
        <field name="name">Order Final</field>
        <field name="res_model">quotation.transaction.telkomsel</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
            <field name="context">{
                "search_default_final_quotation": 4,
                "default_final_quotation": 4}
            </field>
<!--             <field name="domain">[]</field> -->
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_quotation_final_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_quotation_final_form')})]"/>
            <field name="search_view_id" ref="view_quotation_final_filter"/>
            <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create Order Final.
            </p>
        </field>
    </record>

    <menuitem action="open_module_tree_quotation_final_telkomsel"
            id="menu_open_module_tree_quotation_final_telkomsel"
            parent="menu_quotation_final_main_sales"
            sequence="1" groups="contract_e.group_admin,contract_e.group_sales"/>   

    <!-- usage -->
    <record id="view_usage_final_form" model="ir.ui.view">
        <field name="name">Usage Final form</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <form string="Usage Final" create="false" edit="false">
                <sheet>
                    <header>
                        <field name="state_usage" widget="statusbar"/>
                    </header>                    
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="xquotationtrans_number_quotation"/>
                            </h1>
                        </div> 
                        <group>
                            <field name="xquotationtrans_usage_quotation"/>
                            <field name="xquotationtrans_sales_contract_id" invisible="1"/>
                            <field name="xquotationtrans_sales_name" invisible="1"/>
                            <field name="xquotationtrans_sales_phone" invisible="1"/>
                            <field name="xquotationtrans_sales_email" invisible="1"/>
                            <field name="xquotationtrans_sales_department" invisible="1"/>
                            <field name="xquotationtrans_name_vp" invisible="1"/>
                            <field name="xquotationtrans_name_gm" invisible="1"/>
                            <field name="xquotationtrans_email_vp" invisible="1"/>
                            <field name="xquotationtrans_email_gm" invisible="1"/>
                            <field name="xquotationtrans_vp_department" invisible="1"/>
                            <field name="xquotationtrans_gm_department" invisible="1"/>
                            <field name="xquotationtrans_sales_position" invisible="1"/>
                            <field name="xquotationtrans_vp_position" invisible="1"/>
                            <field name="xquotationtrans_gm_position" invisible="1"/>
                            <field name="xquotationtrans_number_contract_id" on_change="onchange_xquotationtrans_number_contract_id(xquotationtrans_number_contract_id)"
                                        domain="[('xtransaction_sales_id', '=', xquotationtrans_sales_contract_id)]"
                                        context="{'show_service': 1}"
                                        options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                        </group>
                    <group>
                        <group string="Client">
                            <field name="xquotationtrans_company_npwp"/>
                            <field name="xquotationtrans_company_contract_id"/>
                            <field name="xquotationtrans_company_alamat" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_contract_id"/>
                            <field name="xquotationtrans_client_delegation_jabatan" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_email" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_phone" invisible="1"/>
                            <field name="xquotationtrans_company_product"/>
                            <field name="xquotationtrans_company_brand_category"/>
                            <field name="xquotationtrans_company_name"/>
                            <field name="xquotationtrans_date"/>
                            <field name="xquotationtrans_merchdelegation_name"/>
                            <field name="xquotationtrans_merchdelegation_email"/>
                            <field name="xquotationtrans_merchdelegation_phone"/>
                            <field name="xquotationtrans_invoices_address"/>
                        </group>
                        <group string="Telkomsel">
                            <field name="xquotationtrans_pic_telkomsel"/>
                            <field name="xquotationtrans_pic_telkomsel_phone"/>
                        </group>
                    </group>
                    <group>
                        <!-- ORDER -->
                        <field name="xquotationtrans_list_rate_card_ids" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                               
                                <field name="xquotationtrans_end_date"/>                               
                                <field name="xquotationtrans_qty"/>                               
                                <field name="xquotationtrans_detailinventory_rate"/>
                                <!-- <field name="xquotationtrans_harga_sales"/>     -->              
                                <field name="xquotationtrans_total"/>                               
                            </tree>
                        </field>
                        <field name="xquotationtrans_total_harga" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>
                        <field name="xquotationtrans_discount" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>                           
                        <field name="xquotationtrans_total_hargax" on_change="update_agesm_onchange" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>   
                        <!-- <field name="hargappn"/> -->     
                        <field name="xquotationtrans_discount_ppnx" on_change="xxxx" invisible='1' attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>        
                        <field name="xquotationtrans_total_bayar_fix" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'order')]}"/>  
                        <!-- USAGE -->
                        <field name="xquotationtrans_list_rate_card_ids_usage" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'usage')]}">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                               
                                <field name="xquotationtrans_end_date"/>                               
                                <field name="xquotationtrans_qty"/>                               
                                <field name="xquotationtrans_detailinventory_rate"/>
                            </tree>
                        </field>
                        <field name="xquotationtrans_discount_usage" attrs="{'invisible': [('xquotationtrans_usage_quotation', '!=', 'usage')]}"/>                           
                    </group>
                    <notebook>
                        <page name="alamatelkomsel" string="Info Telkomsel" invisible="1">
                            <group>
                                <field name="xquotationtrans_alamat_name" invisible="1"/>
                                <field name="xquotationtrans_alamat" invisible="1"/>
                                <field name="xquotationtrans_lantai" invisible="1"/>
                                <field name="xquotationtrans_no_telp" invisible="1"/>
                                <field name="xquotationtrans_facsimile" invisible="1"/>
                                <field name="xquotationtrans_attention" invisible="1"/>
                            </group>
                        </page>  
                        <page name="banktsel" string="Bank Info" invisible="1">
                            <group>
                                <field name="xquotationtrans_account_bank_name" invisible="1"/>
                                <field name="xquotationtrans_bank_name" invisible="1"/> 
                                <field name="xquotationtrans_alamat_bank" invisible="1"/>
                                <field name="xquotationtrans_norek" invisible="1"/>
                            </group>
                        </page>  
                        <page name="sign" string="Signature">
                             <group>
                                <field name="xquotationtrans_sign_vp" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_gm" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_sales" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_client_delegation_signature" widget="signature"/>
                            </group>
                        </page>                                                                        
                    </notebook>
                    </sheet>  
                </sheet>    
            </form>
        </field>
    </record>

    <record id="view_usage_final_tree" model="ir.ui.view">
        <field name="name">Usage Final tree</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <tree string="Usage Final" create="false" edit="false">
                <field name="xquotationtrans_usage_quotation"/> 
                <field name="xquotationtrans_number_quotation"/>  
                <field name="xquotationtrans_number_contract_id"/>  
                <field name="xquotationtrans_sales_contract_id"/>  
                <field name="xquotationtrans_company_contract_id"/>  
                <field name="xquotationtrans_client_delegation_contract_id"/>  
                <field name="xquotationtrans_discount_usage"/> 
                <field name="state_usage"/> 
            </tree>
        </field>
    </record>

    <record id="view_usage_final_filter" model="ir.ui.view">
        <field name="name">Usage Final</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <search string="Usage Final">
                 <filter string="Final Usage" name="final_usage" domain="[('state_usage','=','final'),('xquotationtrans_usage_quotation','=','usage')]"/>   
            </search>
        </field>
    </record>

    <record id="open_module_tree_usage_final_telkomsel" model="ir.actions.act_window">
        <field name="name">Usage Final</field>
        <field name="res_model">quotation.transaction.telkomsel</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
            <field name="context">{
                "search_default_final_usage": 4,
                "default_final_usage": 4}
            </field>
<!--             <field name="domain">[]</field> -->
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_usage_final_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_usage_final_form')})]"/>
            <field name="search_view_id" ref="view_usage_final_filter"/>
            <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create Usage Final.
            </p>
        </field>
    </record>

    <menuitem action="open_module_tree_usage_final_telkomsel"
            id="menu_open_module_tree_usage_final_telkomsel"
            parent="menu_quotation_final_main_sales"
            sequence="4" groups="contract_e.group_admin,contract_e.group_sales"/>      

    <!-- FINAL GM -->
    <menuitem id="menu_final_quotation_main_gm" parent="menu_quotation_root" name="Final Quotation GM" sequence="8"/>
    <!-- Quotation -->
    <!-- ORDER -->
    <record id="view_quotation_final_gm_form" model="ir.ui.view">
        <field name="name">Order Final form</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <form string="Order Final" create="false" edit="false">
                <sheet>
                    <header>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="xquotationtrans_number_quotation" readonly="1"/>
                            </h1>
                        </div>  
                        <group>
                            <field name="xquotationtrans_usage_quotation"/>
                            <field name="xquotationtrans_number_contract_id" on_change="onchange_xquotationtrans_number_contract_id(xquotationtrans_number_contract_id)" 
                                                context="{'show_service': 1}"
                                                options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>     
                            <field name="xquotationtrans_sales_contract_id"/>
                            <field name="xquotationtrans_sales_phone" invisible="1"/>
                            <field name="xquotationtrans_sales_email" invisible="1"/>
                            <field name="xquotationtrans_name_gm" invisible="1"/>
                            <field name="xquotationtrans_email_gm" invisible="1"/>
                        </group>
                    <group>
                        <group string="Client">
                            <field name="xquotationtrans_company_npwp"/>
                            <field name="xquotationtrans_company_contract_id"/>
                            <field name="xquotationtrans_company_alamat" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_contract_id"/>
                            <field name="xquotationtrans_client_delegation_jabatan" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_email" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_phone" invisible="1"/>
                            <field name="xquotationtrans_company_product"/>
                            <field name="xquotationtrans_company_brand_category"/>
                            <field name="xquotationtrans_company_name"/>
                            <field name="xquotationtrans_date"/>
                            <field name="xquotationtrans_merchdelegation_name"/>
                            <field name="xquotationtrans_merchdelegation_email"/>
                            <field name="xquotationtrans_merchdelegation_phone"/>
                            <field name="xquotationtrans_invoices_address"/>
                        </group>
                        <group string="Telkomsel">
                            <field name="xquotationtrans_pic_telkomsel"/>
                            <field name="xquotationtrans_pic_telkomsel_phone"/>
                        </group>
                    </group>
                    <group>
                        <field name="xquotationtrans_list_rate_card_ids">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                                
                                <field name="xquotationtrans_end_date"/>                                
                                <field name="xquotationtrans_qty"/>                                
                                <field name="xquotationtrans_detailinventory_rate"/>
                                <!-- <field name="xquotationtrans_harga_sales"/>     -->               
                                <field name="xquotationtrans_total"/>                                
                            </tree>
                        </field>
                        <field name="xquotationtrans_total_harga"/> 
                        <field name="xquotationtrans_discount"/>                            
                        <field name="xquotationtrans_total_hargax" on_change="update_agesm_onchange"/>    
                        <field name="hargappn"/>      
                        <field name="xquotationtrans_discount_ppnx" on_change="xxxx" invisible="1"/>           
                        <field name="xquotationtrans_total_bayar_fix"/>           
                    </group>
                    <notebook>
                        <page name="alamatelkomsel" string="Info Telkomsel" invisible="1">
                            <group>
                                <field name="xquotationtrans_alamat_name" invisible="1"/>
                                <field name="xquotationtrans_alamat" invisible="1"/>
                                <field name="xquotationtrans_lantai" invisible="1"/>
                                <field name="xquotationtrans_no_telp" invisible="1"/>
                                <field name="xquotationtrans_facsimile" invisible="1"/>
                                <field name="xquotationtrans_attention" invisible="1"/>
                            </group>
                        </page>  
                        <page name="banktsel" string="Bank Info" invisible="1">
                            <group>
                                <field name="xquotationtrans_account_bank_name" invisible="1"/>
                                <field name="xquotationtrans_bank_name" invisible="1"/> 
                                <field name="xquotationtrans_alamat_bank" invisible="1"/>
                                <field name="xquotationtrans_norek" invisible="1"/>
                            </group>
                        </page>
                        <page name="sign" string="Signature">
                             <group>
                                <field name="xquotationtrans_sign_vp" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_gm" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_sales" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_client_delegation_signature" widget="signature"/>
                            </group>
                        </page>                                                                          
                    </notebook>
                    </sheet>  
                </sheet>    
            </form>
        </field>
    </record>

    <record id="view_quotation_final_gm_tree" model="ir.ui.view">
        <field name="name">Order Final tree</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <tree string="Order Final" create="false" edit="false">
                <field name="xquotationtrans_usage_quotation"/> 
                <field name="xquotationtrans_number_quotation"/>  
                <field name="xquotationtrans_number_contract_id"/>  
                <field name="xquotationtrans_sales_contract_id"/>  
                <field name="xquotationtrans_company_contract_id"/>  
                <field name="xquotationtrans_client_delegation_contract_id"/>  
                <field name="xquotationtrans_total_harga"/> 
                <field name="xquotationtrans_discount"/> 
                <field name="xquotationtrans_total_bayar_fix"/> 
                <field name="state"/>  
            </tree>
        </field>
    </record>

    <record id="view_quotation_final_gm_filter" model="ir.ui.view">
        <field name="name">Order Final</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <search string="Order Final">            
                <filter string="Final GM" name="final_quotation" domain="[('xquotationtrans_discount','&lt;=','30'),('xquotationtrans_usage_quotation','=','order')]"/>
                <filter string="Final GM Order" name="final_usage" domain="[('state','=','final')]"/>
            </search>
        </field>
    </record>

    <record id="open_module_tree_final_quotation_telkomsel_gm" model="ir.actions.act_window">
        <field name="name">Order Final</field>
        <field name="res_model">quotation.transaction.telkomsel</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
            <field name="context">{
                "search_default_final_quotation": 30,
                "default_final_quotation": 30}
            </field>
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_quotation_final_gm_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_quotation_final_gm_form')})]"/>
            <field name="search_view_id" ref="view_quotation_final_gm_filter"/>
            <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create Final.
            </p>
        </field>
    </record>
    <menuitem action="open_module_tree_final_quotation_telkomsel_gm"
        id="menu_open_module_tree_final_quotation_telkomsel_gm" parent="menu_final_quotation_main_gm" sequence="2" groups="contract_e.group_admin,contract_e.group_gm"/>
    <!-- Usage -->
    <record id="view_usage_final_gm_form" model="ir.ui.view">
        <field name="name">Usage Final form</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <form string="Usage Final" create="false" edit="false">>
                <sheet>
                    <header>
                        <field name="state_usage" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="xquotationtrans_number_quotation" readonly="1"/>
                            </h1>
                        </div>  
                        <group>
                            <field name="xquotationtrans_usage_quotation"/>
                            <field name="xquotationtrans_number_contract_id" on_change="onchange_xquotationtrans_number_contract_id(xquotationtrans_number_contract_id)" 
                                                context="{'show_service': 1}"
                                                options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>     
                            <field name="xquotationtrans_sales_contract_id"/>
                            <field name="xquotationtrans_sales_phone" invisible="1"/>
                            <field name="xquotationtrans_sales_email" invisible="1"/>
                            <field name="xquotationtrans_name_gm" invisible="1"/>
                            <field name="xquotationtrans_email_gm" invisible="1"/>
                        </group>
                    <group>
                        <group string="Client">
                            <field name="xquotationtrans_company_npwp"/>
                            <field name="xquotationtrans_company_contract_id"/>
                            <field name="xquotationtrans_company_alamat" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_contract_id"/>
                            <field name="xquotationtrans_client_delegation_jabatan" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_email" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_phone" invisible="1"/>
                            <field name="xquotationtrans_company_product"/>
                            <field name="xquotationtrans_company_brand_category"/>
                            <field name="xquotationtrans_company_name"/>
                            <field name="xquotationtrans_date"/>
                            <field name="xquotationtrans_merchdelegation_name"/>
                            <field name="xquotationtrans_merchdelegation_email"/>
                            <field name="xquotationtrans_merchdelegation_phone"/>
                            <field name="xquotationtrans_invoices_address"/>
                        </group>
                        <group string="Telkomsel">
                            <field name="xquotationtrans_pic_telkomsel"/>
                            <field name="xquotationtrans_pic_telkomsel_phone"/>
                        </group>
                    </group>
                    <group>
                        <field name="xquotationtrans_list_rate_card_ids_usage">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                                
                                <field name="xquotationtrans_end_date"/>                                
                                <field name="xquotationtrans_qty"/>                                
                                <field name="xquotationtrans_detailinventory_rate"/>                     
                            </tree>
                        </field>
                        <field name="xquotationtrans_discount_usage"/>                            
                    </group>
                    <notebook>
                        <page name="alamatelkomsel" string="Info Telkomsel" invisible="1">
                            <group>
                                <field name="xquotationtrans_alamat_name" invisible="1"/>
                                <field name="xquotationtrans_alamat" invisible="1"/>
                                <field name="xquotationtrans_lantai" invisible="1"/>
                                <field name="xquotationtrans_no_telp" invisible="1"/>
                                <field name="xquotationtrans_facsimile" invisible="1"/>
                                <field name="xquotationtrans_attention" invisible="1"/>
                            </group>
                        </page>  
                        <page name="banktsel" string="Bank Info" invisible="1">
                            <group>
                                <field name="xquotationtrans_account_bank_name" invisible="1"/>
                                <field name="xquotationtrans_bank_name" invisible="1"/> 
                                <field name="xquotationtrans_alamat_bank" invisible="1"/>
                                <field name="xquotationtrans_norek" invisible="1"/>
                            </group>
                        </page>
                        <page name="sign" string="Signature">
                             <group>
                                <field name="xquotationtrans_sign_vp" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_gm" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_sales" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_client_delegation_signature" widget="signature"/>
                            </group>
                        </page>                                                                          
                    </notebook>
                    </sheet>  
                </sheet>    
            </form>
        </field>
    </record>

    <record id="view_usage_final_gm_tree" model="ir.ui.view">
        <field name="name">Usage Final tree</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <tree string="Usage Final" create="false" edit="false">
                <field name="xquotationtrans_usage_quotation"/> 
                <field name="xquotationtrans_number_quotation"/>  
                <field name="xquotationtrans_number_contract_id"/>  
                <field name="xquotationtrans_sales_contract_id"/>  
                <field name="xquotationtrans_company_contract_id"/>  
                <field name="xquotationtrans_client_delegation_contract_id"/>  
                <field name="xquotationtrans_discount_usage"/> 
                <field name="state_usage"/>   
            </tree>
        </field>
    </record>

    <record id="view_usage_final_gm_filter" model="ir.ui.view">
        <field name="name">Usage Final</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <search string="Usage Pending">
                <filter string="Final GM" name="final_usage" domain="[('xquotationtrans_discount_usage','&lt;=','30'),('xquotationtrans_usage_quotation','=','usage')]"/>
                <filter string="Final GM Usage" name="final_usage" domain="[('state_usage','=','final')]"/>
            </search>
        </field>
    </record>

    <record id="open_module_tree_usage_final_telkomsel_gm" model="ir.actions.act_window">
        <field name="name">Usage Final</field>
        <field name="res_model">quotation.transaction.telkomsel</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
            <field name="context">{
                "search_default_final_usage": 30,
                "default_final_usage": 30}
            </field>
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_usage_final_gm_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_usage_final_gm_form')})]"/>
            <field name="search_view_id" ref="view_usage_final_gm_filter"/>
            <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create Aprroved.
            </p>
        </field>
    </record>
    <menuitem action="open_module_tree_usage_final_telkomsel_gm"
        id="menu_open_module_tree_usage_final_telkomsel_gm" parent="menu_final_quotation_main_gm" sequence="3" groups="contract_e.group_admin,contract_e.group_gm"/>

    <!-- FINAL VP -->
    <menuitem id="menu_final_quotation_main_vp" parent="menu_quotation_root" name="Final Quotation VP" sequence="9"/>
    <!-- Quotation -->
    <!-- ORDER -->
    <record id="view_quotation_final_vp_form" model="ir.ui.view">
        <field name="name">Order Final form</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <form string="Order Final" create="false" edit="false">
                <sheet>
                    <header>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="xquotationtrans_number_quotation" readonly="1"/>
                            </h1>
                        </div>  
                        <group>
                            <field name="xquotationtrans_usage_quotation"/>
                            <field name="xquotationtrans_number_contract_id" on_change="onchange_xquotationtrans_number_contract_id(xquotationtrans_number_contract_id)" 
                                                context="{'show_service': 1}"
                                                options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>     
                            <field name="xquotationtrans_sales_contract_id"/>
                            <field name="xquotationtrans_sales_phone" invisible="1"/>
                            <field name="xquotationtrans_sales_email" invisible="1"/>
                            <field name="xquotationtrans_name_gm" invisible="1"/>
                            <field name="xquotationtrans_email_gm" invisible="1"/>
                        </group>
                    <group>
                        <group string="Client">
                            <field name="xquotationtrans_company_npwp"/>
                            <field name="xquotationtrans_company_contract_id"/>
                            <field name="xquotationtrans_company_alamat" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_contract_id"/>
                            <field name="xquotationtrans_client_delegation_jabatan" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_email" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_phone" invisible="1"/>
                            <field name="xquotationtrans_company_product"/>
                            <field name="xquotationtrans_company_brand_category"/>
                            <field name="xquotationtrans_company_name"/>
                            <field name="xquotationtrans_date"/>
                            <field name="xquotationtrans_merchdelegation_name"/>
                            <field name="xquotationtrans_merchdelegation_email"/>
                            <field name="xquotationtrans_merchdelegation_phone"/>
                            <field name="xquotationtrans_invoices_address"/>
                        </group>
                        <group string="Telkomsel">
                            <field name="xquotationtrans_pic_telkomsel"/>
                            <field name="xquotationtrans_pic_telkomsel_phone"/>
                        </group>
                    </group>
                    <group>
                        <field name="xquotationtrans_list_rate_card_ids">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                                
                                <field name="xquotationtrans_end_date"/>                                
                                <field name="xquotationtrans_qty"/>                                
                                <field name="xquotationtrans_detailinventory_rate"/>
                                <!-- <field name="xquotationtrans_harga_sales"/>     -->               
                                <field name="xquotationtrans_total"/>                                
                            </tree>
                        </field>
                        <field name="xquotationtrans_total_harga"/> 
                        <field name="xquotationtrans_discount"/>                            
                        <field name="xquotationtrans_total_hargax" on_change="update_agesm_onchange"/>    
                        <field name="hargappn"/>      
                        <field name="xquotationtrans_discount_ppnx" on_change="xxxx" invisible="1"/>           
                        <field name="xquotationtrans_total_bayar_fix"/>           
                    </group>
                    <notebook>
                        <page name="alamatelkomsel" string="Info Telkomsel" invisible="1">
                            <group>
                                <field name="xquotationtrans_alamat_name" invisible="1"/>
                                <field name="xquotationtrans_alamat" invisible="1"/>
                                <field name="xquotationtrans_lantai" invisible="1"/>
                                <field name="xquotationtrans_no_telp" invisible="1"/>
                                <field name="xquotationtrans_facsimile" invisible="1"/>
                                <field name="xquotationtrans_attention" invisible="1"/>
                            </group>
                        </page>  
                        <page name="banktsel" string="Bank Info" invisible="1">
                            <group>
                                <field name="xquotationtrans_account_bank_name" invisible="1"/>
                                <field name="xquotationtrans_bank_name" invisible="1"/> 
                                <field name="xquotationtrans_alamat_bank" invisible="1"/>
                                <field name="xquotationtrans_norek" invisible="1"/>
                            </group>
                        </page>
                        <page name="sign" string="Signature">
                             <group>
                                <field name="xquotationtrans_sign_vp" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_gm" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_sales" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_client_delegation_signature" widget="signature"/>
                            </group>
                        </page>                                                                          
                    </notebook>
                    </sheet>  
                </sheet>    
            </form>
        </field>
    </record>

    <record id="view_quotation_final_vp_tree" model="ir.ui.view">
        <field name="name">Order Final tree</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <tree string="Order Final" create="false" edit="false">
                <field name="xquotationtrans_usage_quotation"/> 
                <field name="xquotationtrans_number_quotation"/>  
                <field name="xquotationtrans_number_contract_id"/>  
                <field name="xquotationtrans_sales_contract_id"/>  
                <field name="xquotationtrans_company_contract_id"/>  
                <field name="xquotationtrans_client_delegation_contract_id"/>  
                <field name="xquotationtrans_total_harga"/> 
                <field name="xquotationtrans_discount"/> 
                <field name="xquotationtrans_total_bayar_fix"/> 
                <field name="state"/>  
            </tree>
        </field>
    </record>

    <record id="view_quotation_final_vp_filter" model="ir.ui.view">
        <field name="name">Order Final</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <search string="Order Final">
                <filter string="Final VP" name="final_quotation" domain="[('xquotationtrans_discount','&gt;','30'),('xquotationtrans_usage_quotation','=','order')]"/>
                <filter string="Final VP Order" name="final_usage" domain="[('state','=','final')]"/>
            </search>
        </field>
    </record>

    <record id="open_module_tree_quotation_final_telkomsel_vp" model="ir.actions.act_window">
        <field name="name">Order Final</field>
        <field name="res_model">quotation.transaction.telkomsel</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
            <field name="context">{
                "search_default_final_quotation": 30,
                "default_final_quotation": 30}
            </field>
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_quotation_final_vp_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_quotation_final_vp_form')})]"/>
            <field name="search_view_id" ref="view_quotation_final_vp_filter"/>
            <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create Final.
            </p>
        </field>
    </record>
    <menuitem action="open_module_tree_quotation_final_telkomsel_vp"
        id="menu_open_module_tree_quotation_final_telkomsel_vp" parent="menu_final_quotation_main_vp" sequence="2" groups="contract_e.group_admin,contract_e.group_vp"/>
    <!-- Usage -->
    <record id="view_usage_final_vp_form" model="ir.ui.view">
        <field name="name">Usage Final form</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <form string="Usage Final" create="false" edit="false">
                <sheet>
                    <header>
                        <field name="state_usage" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="xquotationtrans_number_quotation" readonly="1"/>
                            </h1>
                        </div>  
                        <group>
                            <field name="xquotationtrans_usage_quotation"/>
                            <field name="xquotationtrans_number_contract_id" on_change="onchange_xquotationtrans_number_contract_id(xquotationtrans_number_contract_id)" 
                                                context="{'show_service': 1}"
                                                options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>     
                            <field name="xquotationtrans_sales_contract_id"/>
                            <field name="xquotationtrans_sales_phone" invisible="1"/>
                            <field name="xquotationtrans_sales_email" invisible="1"/>
                            <field name="xquotationtrans_name_gm" invisible="1"/>
                            <field name="xquotationtrans_email_gm" invisible="1"/>
                        </group>
                    <group>
                        <group string="Client">
                            <field name="xquotationtrans_company_npwp"/>
                            <field name="xquotationtrans_company_contract_id"/>
                            <field name="xquotationtrans_company_alamat" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_contract_id"/>
                            <field name="xquotationtrans_client_delegation_jabatan" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_email" invisible="1"/>
                            <field name="xquotationtrans_client_delegation_phone" invisible="1"/>
                            <field name="xquotationtrans_company_product"/>
                            <field name="xquotationtrans_company_brand_category"/>
                            <field name="xquotationtrans_company_name"/>
                            <field name="xquotationtrans_date"/>
                            <field name="xquotationtrans_merchdelegation_name"/>
                            <field name="xquotationtrans_merchdelegation_email"/>
                            <field name="xquotationtrans_merchdelegation_phone"/>
                            <field name="xquotationtrans_invoices_address"/>
                        </group>
                        <group string="Telkomsel">
                            <field name="xquotationtrans_pic_telkomsel"/>
                            <field name="xquotationtrans_pic_telkomsel_phone"/>
                        </group>
                    </group>
                    <group>
                        <field name="xquotationtrans_list_rate_card_ids_usage">
                            <tree string="List Perangkat" class="my_custom_class" editable="bottom">
                                <field name="xquotationtrans_main_ratecard_id" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_inventory_ratecard_id" domain="[('xinventoryrate_ratecard_id', '=', xquotationtrans_main_ratecard_id)]" options="{'no_create': True, 'no_open': True}"/>
                                <field name="xquotationtrans_detailinventory_ratecard_id" domain="[('xdetailratecard_inventory_id', '=', xquotationtrans_inventory_ratecard_id)]" on_change="onchange_xquotationtrans_detailinventory_ratecard_id(xquotationtrans_detailinventory_ratecard_id)" context="{'show_service': 1}" options='{"always_reload": True, "highlight_first_line": True, "no_create": True, "no_open": True}'/>
                                <field name="xquotationtrans_detailinventory_remark"/>
                                <field name="xquotationtrans_date_begin"/>                                
                                <field name="xquotationtrans_end_date"/>                                
                                <field name="xquotationtrans_qty"/>                                
                                <field name="xquotationtrans_detailinventory_rate"/>                     
                            </tree>
                        </field>
                        <field name="xquotationtrans_discount_usage"/>                            
                    </group>
                    <notebook>
                        <page name="alamatelkomsel" string="Info Telkomsel" invisible="1">
                            <group>
                                <field name="xquotationtrans_alamat_name" invisible="1"/>
                                <field name="xquotationtrans_alamat" invisible="1"/>
                                <field name="xquotationtrans_lantai" invisible="1"/>
                                <field name="xquotationtrans_no_telp" invisible="1"/>
                                <field name="xquotationtrans_facsimile" invisible="1"/>
                                <field name="xquotationtrans_attention" invisible="1"/>
                            </group>
                        </page>  
                        <page name="banktsel" string="Bank Info" invisible="1">
                            <group>
                                <field name="xquotationtrans_account_bank_name" invisible="1"/>
                                <field name="xquotationtrans_bank_name" invisible="1"/> 
                                <field name="xquotationtrans_alamat_bank" invisible="1"/>
                                <field name="xquotationtrans_norek" invisible="1"/>
                            </group>
                        </page>
                        <page name="sign" string="Signature">
                             <group>
                                <field name="xquotationtrans_sign_vp" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_gm" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_sign_sales" widget="image" class="oe_avatar" options='{"preview_image": "image_medium"}' invisible="1"/>
                                <field name="xquotationtrans_client_delegation_signature" widget="signature"/>
                            </group>
                        </page>                                                                          
                    </notebook>
                    </sheet>  
                </sheet>    
            </form>
        </field>
    </record>

    <record id="view_usage_final_vp_tree" model="ir.ui.view">
        <field name="name">Usage Final tree</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <tree string="Usage Final" create="false" edit="false">
                <field name="xquotationtrans_usage_quotation"/> 
                <field name="xquotationtrans_number_quotation"/>  
                <field name="xquotationtrans_number_contract_id"/>  
                <field name="xquotationtrans_sales_contract_id"/>  
                <field name="xquotationtrans_company_contract_id"/>  
                <field name="xquotationtrans_client_delegation_contract_id"/>  
                <field name="xquotationtrans_discount_usage"/> 
                <field name="state_usage"/>   
            </tree>
        </field>
    </record>

    <record id="view_usage_final_vp_filter" model="ir.ui.view">
        <field name="name">Usage Final</field>
        <field name="model">quotation.transaction.telkomsel</field>
        <field name="arch" type="xml">
            <search string="Usage Final">
                <filter string="Final VP" name="final_usage" domain="[('xquotationtrans_discount_usage','&gt;','30'),('xquotationtrans_usage_quotation','=','usage')]"/>
                <filter string="Final VP Usage" name="final_usage" domain="[('state_usage','=','final')]"/>
            </search>
        </field>
    </record>

    <record id="open_module_tree_usage_final_telkomsel_vp" model="ir.actions.act_window">
        <field name="name">Usage Final</field>
        <field name="res_model">quotation.transaction.telkomsel</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
            <field name="context">{
                "search_default_final_usage": 30,
                "default_final_usage": 30}
            </field>
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_usage_final_vp_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_usage_final_vp_form')})]"/>
            <field name="search_view_id" ref="view_usage_final_vp_filter"/>
            <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create Final.
            </p>
        </field>
    </record>
    <menuitem action="open_module_tree_usage_final_telkomsel_vp"
        id="menu_open_module_tree_usage_final_telkomsel_vp" parent="menu_final_quotation_main_vp" sequence="3" groups="contract_e.group_admin,contract_e.group_vp"/>
</odoo>